<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Security Token Service Client Sample</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.4  (Unix)">
	<META NAME="CREATED" CONTENT="0;0">
	<META NAME="CHANGEDBY" CONTENT="Mrudul Uchil">
	<META NAME="CHANGED" CONTENT="20080304;13510800">
	<META NAME="CHANGEDBY" CONTENT="Mrudul Uchil">
	<META NAME="CHANGEDBY" CONTENT="Mrudul Uchil">
	<!-- The contents of this file are subject to the terms
   of the Common Development and Distribution License
   (the License). You may not use this file except in
   compliance with the License.
                                                                                                                                  
   You can obtain a copy of the License at
   https://opensso.dev.java.net/public/CDDLv1.0.html or
   opensso/legal/CDDLv1.0.txt
   See the License for the specific language governing
   permission and limitations under the License.
                                                                                                                                  
   When distributing Covered Code, include this CDDL
   Header Notice in each file and include the License file
   at opensso/legal/CDDLv1.0.txt.
   If applicable, add the following below the CDDL Header,
   with the fields enclosed by brackets [] replaced by
   your own identifying information:
   "Portions Copyrighted [year] [name of copyright owner]"

   $Id: index.html,v 1.6 2008-03-04 23:42:49 mrudul_uchil Exp $

   Copyright 2007 Sun Microsystems Inc. All Rights Reserved
-->
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0 STYLE="page-break-before: always">
	<TR>
		<TD>
			<P>&nbsp;</P>
		</TD>
		<TD>
			<P>&nbsp;</P>
		</TD>
	</TR>
</TABLE>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0>
	<TR>
		<TD WIDTH=99%>
			<P><IMG SRC="../console/images/PrimaryProductName.png" NAME="ProdName" ALIGN=BOTTOM WIDTH=94 HEIGHT=47 BORDER=0></P>
		</TD>
		<TD WIDTH=1%>
			<P><IMG SRC="../com_sun_web_ui/images/other/javalogo.gif" NAME="RMRealm.mhCommon.BrandLogo" ALT="Java(TM) Logo" ALIGN=BOTTOM WIDTH=31 HEIGHT=55 BORDER=0></P>
		</TD>
	</TR>
</TABLE>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0>
	<TR>
		<TD>
			<IMG SRC="../com_sun_web_ui/images/masthead/masthead-sunname.gif" NAME="RMRealm.mhCommon.EndorserLogo" ALT="Sun(TM) Microsystems, Inc." ALIGN=RIGHT WIDTH=108 HEIGHT=10 BORDER=0></TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in"><A NAME="SkipAnchor2089"></A><A HREF="#SkipAnchor4928"><IMG SRC="../com_sun_web_ui/images/other/dot.gif" NAME="graphics1" ALT="Jump Over Tab Navigation Area. Current Selection is: Access Control" ALIGN=BOTTOM WIDTH=2 HEIGHT=2 BORDER=0></A></P>
<TABLE WIDTH=1404 BORDER=0 CELLPADDING=10 CELLSPACING=0>
	<COL WIDTH=1384>
	<TR>
		<TD WIDTH=1384>
			<P STYLE="margin-bottom: 0in">&nbsp;</P>
			<P STYLE="margin-bottom: 0in"><A HREF="../index.html">Client
			Samples Main Page</A> 
			</P>
			<P STYLE="margin-bottom: 0in">&nbsp;</P>
			<H3>Introduction</H3>
			<P STYLE="margin-bottom: 0in">This sample demonstrates the usage
			of Security Token Service (STS) Client API for obtaining security
			tokens from a Security Token Service hosted on Federated Access
			Manager server. STS client API makes WS-Trust request to STS
			service in order to get Security Token from STS service. The
			communication between STS client and STS service is secured using
			Authentication token of STS client. This Authentication token used
			in the sample is X509 token. STS service authenticates STS client
			based on its X509 authentication token and issues SAML 1.1 or SAML
			2.0 token.</P>
			<H3>Setup</H3>
			<P STYLE="margin-bottom: 0in">STS service :</P>
			<OL>
				<LI><P STYLE="margin-bottom: 0in">Deploy OpenSSO war</P>
				<LI><P STYLE="margin-bottom: 0in">Configure OpenSSO web
				application</P>
				<LI><P STYLE="margin-bottom: 0in">Restart OpenSSO server</P>
			</OL>
			<P STYLE="margin-bottom: 0in">STS client :</P>
			<OL>
				<LI><P STYLE="margin-bottom: 0in">This FAM client web application</P>
				<LI><P STYLE="margin-bottom: 0in">This page → &lt;fam client
				web application protocol://host:port&gt;/sts/index.html</P>
			</OL>
			<H3>JSP pages</H3>
			<P STYLE="margin-bottom: 0in">There are two sample JSP pages
			included in this STS client sample.</P>
			<OL>
				<LI><P STYLE="margin-bottom: 0in">&lt;fam client web application
				protocol://host:port&gt;/sts/sts-client-user.jsp</P>
				<P STYLE="margin-bottom: 0in">This will redirect to
				authentication service of OpenSSO server. 
				</P>
				<P STYLE="margin-bottom: 0in">Login with any existing OpenSSO
				user. 
				</P>
				<P STYLE="margin-bottom: 0in">After successful user
				authentication and valid user's SSOToken, the page will redirect
				back to sts-client-user.jsp.</P>
				<P STYLE="margin-bottom: 0in">sts-client-user.jsp will display
				SAML assertion obtained from OpenSSO Security Token Service, in
				exchange of end user's SSOToken.</P>
				<P STYLE="margin-bottom: 0in"><B>Description :</B></P>
				<P STYLE="margin-bottom: 0in">There are two parties involved in
				this Sample :</P>
				<P STYLE="margin-bottom: 0in">1) Security Token Service Client
				(STS client)</P>
				<P STYLE="margin-bottom: 0in">2) Security Token Service (STS)</P>
				<P STYLE="margin-bottom: 0in">The Security Token Service (STS)
				issues security tokens on behalf of authenticated end user. Here
				JSP page selects the default STS client profile to talk to STS
				service. Then STS client makes WS-Trust request to STS service
				with its X509 certificate as the Authentication token. STS
				service authenticates this X509 certificate and issues SAML 1.1
				or SAML 2.0 (this token type of SAML1.1 or SAML 2.0 is dictated
				by WSP's profile). This WS-Trust request also carries the end
				user's authenticated SSOToken as “On Behalf Of” token
				element. The owner of STS service issued SAML token would be the
				authenticated End user and its identity (name id) would be the
				End user's user identity.</P>
				<LI><P STYLE="margin-bottom: 0in">&lt;fam client web application
				protocol://host:port&gt;/sts/sts-client-wsc.jsp 
				</P>
				<P STYLE="margin-bottom: 0in">Login to OpenSSO Administration
				console &lt;OpenSSO web application
				protocol://host:port&gt;/&lt;opensso deploy uri&gt; as “amadmin”
				user and its password.</P>
				<P STYLE="margin-bottom: 0in">Go to Configuration → Agents →
				Web Service Client → click “wsc” agent profile</P>
				<P STYLE="margin-bottom: 0in">Select Security Mechanism as
				“STSSecurity”, STS Configuration as “SecurityTokenService”
				and Web Service End Point as “default”.</P>
				<P STYLE="margin-bottom: 0in">Save changes and Logout of OpenSSO
				Administration console.</P>
				<P STYLE="margin-bottom: 0in">Access &lt;fam client web
				application protocol://host:port&gt;/sts/sts-client-wsc.jsp</P>
				<P STYLE="margin-bottom: 0in">Enter web service name as &quot;wsc&quot;
				and click &quot;GetToken&quot;.<BR>If successful, this will
				display SAML Assertion obtained from OpenSSO Security Token
				Service.</P>
				<P STYLE="margin-bottom: 0in"><B>Description :</B></P>
				<P STYLE="margin-bottom: 0in">There are four parties involved in
				this Sample :</P>
				<P STYLE="margin-bottom: 0in">1) Web Services Client (WSC) 
				</P>
				<P STYLE="margin-bottom: 0in">2) Web Services Provider (WSP) 
				</P>
				<P STYLE="margin-bottom: 0in">3) Security Token Service Client
				(STS client)</P>
				<P STYLE="margin-bottom: 0in">4) Security Token Service (STS)</P>
				<P STYLE="margin-bottom: 0in">The Security Token Service (STS)
				issues security tokens for Web Services Client (WSC) so that WSC
				could present it to the Web Services Provider (WSP) for
				authentication purposes. Here WSC selects to get security token
				from STS, in order to present that token to WSP. When WSC selects
				the STS issues token, it also selects the STS client profile
				required to talk to STS service. Then STS client makes WS-Trust
				request to STS service with its X509 certificate as the
				Authentication token. STS service authenticates this X509
				certificate and issues SAML 1.1 or SAML 2.0 (this token type of
				SAML1.1 or SAML 2.0 is dictated by WSP's profile). The owner of
				this SAML token would be STS client and its identity (name id)
				would be certificate subject DN of the STS client's X509
				certificate.</P>
			</OL>
			<H3>NOTEs</H3>
			<P STYLE="margin-bottom: 0in">1) How to change WSP's profile to
			dictate SAML 1.1 or SAML 2.0 token ?</P>
			<OL START=2>
				<P STYLE="margin-bottom: 0in">Login to OpenSSO Administration
				console &lt;OpenSSO web application
				protocol://host:port&gt;/&lt;opensso deploy uri&gt; as “amadmin”
				user and its password.</P>
				<P STYLE="margin-bottom: 0in">Go to Configuration → Agents →
				Web Service Provider → click “wsp” agent profile</P>
				<P STYLE="margin-bottom: 0in">Select Security Mechanism as
				“SAML2-HolderOfKey” or “SAML2-SenderVouches” for SAML 2.0
				token type.</P>
				<P STYLE="margin-bottom: 0in">Select Security Mechanism as
				“SAML-HolderOfKey” or “SAML-SenderVouches” for SAML 1.1
				token type.</P>
				<P>Save changes and Logout of OpenSSO Administration console.</P>
			</OL>
		</TD>
	</TR>
</TABLE>
<P><BR><BR>
</P>
</BODY>
</HTML>