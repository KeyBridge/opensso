------------------------------------------------------------------------------
README file for Open Web Single Sign-On tuning scripts (amtune)
------------------------------------------------------------------------------
   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.
  
Copyright (c) 2007 Sun Microsystems Inc. All Rights Reserved
  
The contents of this file are subject to the terms
of the Common Development and Distribution License
(the License). You may not use this file except in
compliance with the License.

You can obtain a copy of the License at
https://opensso.dev.java.net/public/CDDLv1.0.html or
opensso/legal/CDDLv1.0.txt
See the License for the specific language governing
permission and limitations under the License.

When distributing Covered Code, include this CDDL
Header Notice in each file and include the License file
at opensso/legal/CDDLv1.0.txt.
If applicable, add the following below the CDDL Header,
with the fields enclosed by brackets [] replaced by
your own identifying information:
"Portions Copyrighted [year] [name of copyright owner]"

$Id: README,v 1.6 2008-07-25 05:33:06 kanduls Exp $

------------------------------------------------------------------------------

%% Contents:
    %% 1. About tuning sripts
    %% 2. Setup tuning scripts
    %% 3. Running tuning scripts

%% 1. About tuning scripts
--------------------------
The OpenSSO Enterprise tuning scripts allow you to tune OpenSSO Enterprise and other 
components of your deployment, including Sun Java System Directory Server, 
the web container running OpenSSO Enterprise, and the operating system (OS) kernel 
and TCP/IP parameters.

The following table describes the tuning scripts that are available in OpenSSO release.

The source location of tuning scripts is opensso/products/amserver/scripts/tune/amtune and 
opensso/products/amserver/scripts/tune/amtune.bat.

%% 2. Setup tuning scripts
---------------------------
Step 1: Unzip ssoAdminTools.zip to the desired directory.

Step 2: Go to the directory which has the ssoAdminTools.zip unzipped.
        Run the setup command as follows:
        "./setup" or "setup"
        for Unix and Windows respectively.
        Then enter the configuration directory when prompted.
        "Path to config files of OpenSSO Enterprise
        (example: /fam_config/opensso):"

Step 3: After step 2 is performed, the CLIs can be run under the following
        directory:
        <TOOLS_DIR>/<FAM_INSTANCE_NAME>/bin
        where <TOOLS_DIR> is the directory which has ssoAdminTools.zip unzipped
        (ie: current directory), and <FAM_INSTANCE_NAME> is the deployment
        URI of OpenSSO Enterprise.

%% 2. Running tunning scripts

2.1 Tuning Modes

The OpenSSO Enterprise tuning scripts can run in the following modes, as determined by the AMTUNE_MODE 
parameter in the amtune-env.properties file.

    * 	REVIEW mode (default). The scripts return tuning recommendations for an OpenSSO Enterprise deployment, 
	but they do not make any actual changes to the environment.
    * 	CHANGE mode. The scripts make all of the tuning modifications that are defined in the amtune-env.properties 
	file.  Use CHANGE mode only after you have reviewed and understand the tuning 
	changes that will be applied to your deployment.

In either mode, the scripts return a list of tuning recommendations to the 
<TOOLS_DIR>\<FAM_INSTANCE_NAME>\logs\amtune-config.<randomstring> log file and the 
terminal window,  debug logs will be present in the file 
<TOOLS_DIR>\<FAM_INSTANCE_NAME>\logs\amtune-debug-logs.


2.2 Running scripts

2.2.1 Running scripts to tune the operating system, the Web Container, and the OpenSSO Enterprise

To run a tuning script, 

	* Log in as or become superuser.
	* If you have not run the scripts in REVIEW mode, ensure that AMTUNE_MODE is set to REVIEW 
	  (default value) in the <TOOLS_DIR>\<FAM_INSTANCE_NAME>\bin\amtune\amtune-env.properties file. 
	* Edit other parameters in the amtune-env.properties file, depending on the components you want to tune
	* Execute <TOOLS_DIR>\<FAM_INSTANCE_NAME>\bin\amtune\amtune on Unix/Linux and 
          <TOOLS_DIR>\<FAM_INSTANCE_NAME>\bin\amtune\amtune.bat on Windows
	* In REVIEW mode, run either the amtune script or one of the component scripts.  Review the tuning 
	  recommendations in the debug log file. If needed, make changes to the amtune-env.properties file based on 
	  this run.
	* If you are satisfied with the tuning recommendations from the REVIEW mode run, set AMTUNE_MODE 
	  to CHANGE in the amtune-env.properties file.
	* Check the debug log file for the results of the run.

	Note: In CHANGE mode, the amtune script might need to restart the Web container and OpenSSO Enterprise. In 
	some instances, amtune might also recommend a system restart.  


2.2.2 Executing amtune on a remote Sun Directory Server machine.

Step 1. FTP or copy over amtune.zip generated by amtune/amtune.bat to the remote Sun DS machine.
Step 2. Unzip amtune.zip.
Step 3. Set values for TOOLS_HOME and JAVA_HOME in
        <TOOLS_DIR>/bin/unix/amtune on Unix/Linux and
        <TOOLS_DIR>\bin\windows\amtune.bat on Windows.   
Step 4. Edit amtune-env.properties file with DS information.
Step 5. Execute amtune on Unix/Linux and amtune.bat on Windows.

