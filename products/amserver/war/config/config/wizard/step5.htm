<script type="text/javascript">

    var loadBalancerValid = #if((!$host && !$port) || ($host && $port))true#{else}false#{end};

    function disableLoadBalancer() {
        $('loadBalancerModule').style.display = "none";
        $('loadBalancerEnable').checked = false;
        $('loadBalancerDisable').checked = true;
        $('loadBalancerHostName').value = null;
        $('loadBalancerPort').value = null;
        $('loadBalancerStatus').innerHTML = "";
        loadBalancerValid = false;
        $('nextTabButton').disabled = false;
        AjaxUtils.call("$context$path?actionLink=clear");
    }

    function enableLoadBalancer() {
        $('loadBalancerModule').style.display = "";
        $('loadBalancerEnable').checked = true;
        $('loadBalancerDisable').checked = false;
        $('nextTabButton').disabled = true;
    }

    function loadBalancerValidated( body ) {
        loadBalancerValid = true;
        $('nextTabButton').disabled = false;
        $('loadBalancerStatus').innerHTML = '<img class="pointer" src="$context/assets/images/check_true.JPG"> ' +
                                            '<small>' + body + '</small>';
    }
    function loadBalancerInvalidated( body ) {
        loadBalancerValid = false;
        $('nextTabButton').disabled = true;
        $('loadBalancerStatus').innerHTML = body;
    }

    function validateLoadBalancer() {
        var params = "host=" + $('loadBalancerHostName').value + "&port=" + $('loadBalancerPort').value;
        APP.call( "$context$path", "validate", params, loadBalancerValidated, loadBalancerInvalidated );
    }

    function wizardStep5Init() {
        YAHOO.util.Event.addListener('loadBalancerDisable', "click", disableLoadBalancer );
        YAHOO.util.Event.addListener('loadBalancerEnable', "click", enableLoadBalancer );
        if ( loadBalancerValid ) {
            $('nextTabButton').disabled = false;
            if( $('loadBalancerEnable').checked ) {
                validateLoadBalancer();
            }
        } else {
            $('nextTabButton').disabled = true;
        }
    }

    YAHOO.util.Event.onDOMReady( wizardStep5Init );

</script>

<h1>Step 5: Load Balancing<img class="pointer" alt="info" src="$context/assets/images/message.gif"/></h1>
<p>Will this instance be deployed behind a load balancer?</p>
<input type="radio" id="loadBalancerDisable" #if ($host || $port) checked="checked"#{end}/><span>&nbsp;No</span><br/>
<input type="radio" id="loadBalancerEnable" #if (!$host && !$port) checked="checked"#{end}/><span>&nbsp;Yes</span>

<div id="loadBalancerModule" style="width:500px;#if(!$host && !$port)display:none#{end}">
	<p id="allfields" class="OrangeVerySmall">*&nbsp;ALL Fields are Required</p>
    <b class="xtop"><b class="xt1"></b><b class="xt2"></b><b class="xt3"></b><b class="xt4"></b></b>
	<div class="headerBox" style="margin-left:10px">Load Balancer Details</div>
    <div class="bodyBox" style="height:150px;margin-left:10px">
        <fieldset id="loadBalancerFieldset">
            <ol>
                <li>
                    <label for="loadBalancerHostName">Load Balancer Host Name<em>*</em></label>
                    <input id="loadBalancerHostName" name="loadBalancerHostName" type="text" value="#if($host)$host#{end}" class="text" style="width:150px" onkeyup="APP.callDelayed(this,validateLoadBalancer)"/>
                    <span id="loadBalancerStatus"></span>
                </li>
                <li>
                    <label for="loadBalancerPort">Port<em>*</em></label>
                    <input id="loadBalancerPort" name="loadBalancerPort" type="text" value="#if($port)$port#{end}" class="text" style="width:150px" onkeyup="APP.callDelayed(this,validateLoadBalancer)"/>
                </li>
            </ol>
        </fieldset>
    </div>
	<div style="margin-left:10px"><b class="xbottom"><b class="xbGray1"></b><b class="xbGray2"></b><b class="xbGray3"></b><b class="xbGray4"></b></b></div>
</div>