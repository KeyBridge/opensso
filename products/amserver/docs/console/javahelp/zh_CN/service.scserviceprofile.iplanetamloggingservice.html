<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><!-- GenHTML@15714-->
<head>
  <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8">
  <!-- ident      "%Z%%M% %I%     %E% SMI" -->

  <title>记录 
  </title>
  <script type="text/javascript" src="/com_sun_web_ui/js/browserVersion.js"></script>
  <script type="text/javascript" src="/com_sun_web_ui/js/stylesheet.js"></script>
  <script type="text/javascript"><!-- Empty script so IE5.0 Windows will draw table and button borders --></script>
  <meta name="Copyright" content="Copyright &copy; 2006 by Sun Microsystems, Inc. All Rights Reserved." />
</head>

<body class="HlpBdy">

<A NAME="service.scserviceprofile.iplanetamloggingservice"></A><h3>记录 </h3>
<p><A NAME="indexterm-206"></A>“记录”服务用于提供与 Access Manager 管理相关的状态和错误消息。管理员可以配置日志文件大小和日志文件位置等值。Access Manager 可以在平面文本文件或关系数据库中记录事件。日志服务属性是全局属性。这些属性包括：</p>
<ul><li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbsv">最大日志大小</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbsg">历史文件数目</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbzh">日志文件位置</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbwg">日志类型</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbrd">数据库用户名</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxcdf">数据库用户密码</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxcep">数据库用户密码（确认）</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbvb">数据库驱动程序名</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbsb">可配置日志字段</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxccb">日志验证频率</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbxe">日志签名时间</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxcbz">安全日志</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbxt">最大记录数目</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbwp">每个归档文件中的文件数目</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbyw">缓冲大小</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbvh">DB 失败内存缓冲区大小</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxcea">缓冲时间</A></p>
</li>
<li><p><A HREF="service.scserviceprofile.iplanetamloggingservice.html#fxbsn">时间缓冲</A></p>
</li>
</ul>
<A NAME="fxbsv"></A><h4>最大日志大小</h4>
<p>该属性接受 Access Manager 日志文件的最大值（以字节为单位）。默认值为 1000000。</p>
<A NAME="fxbsg"></A><h4>历史文件数目</h4>
<p>该属性的值与为进行历史分析而保留的备份日志文件的数目相等。在本地系统的分区大小和可用磁盘空间允许的情况下，可以输入任何整数。默认值为 3。</p>
<p>该文件仅适用于 FILE 日志类型。当“日志类型”属性设置为 DB 时，就不会有历史文件，Access Manager 也不会明确设置其大小限制。</p>
<p><hr size="1" noshade><p><b>注 &#8211; </b>对输入值 0 和输入值 1 的解释相同，即如果指定 0，则会创建历史日志文件。</p>
<hr size="1" noshade></p><A NAME="fxbzh"></A><h4>日志文件位置</h4>
<p>基于文件的日志函数需要一个可以存储日志文件的位置。该字段接受该位置的完整目录路径。默认位置为：</p>
<p><tt>/var/opt/SUNWam/logs</tt></p>
<p>如果指定的不是默认目录，其不存在时 Access Manager 将会创建这一目录。然后您应该为此目录设置合适的权限（例如，0700）。</p>
<p>配置 DB（数据库）日志（如 Oracle 或 MySQL）的日志位置时，日志位置的有些部分区分大小写。例如，如果记录到 Oracle 数据库，日志位置应为（注意区分大小写）：</p>
<p><tt>jdbc:oracle:thin:@machine.domain:port:DBName</tt></p>
<p>要对 DB 配置日志，请将 JDBC 驱动程序文件添加到 Web 容器的 JVM 类路径。需要将 JDBC 驱动程序文件手动添加到 <tt>amadmin</tt> 脚本的类路径中，否则，<tt>amadmin</tt> 记录将无法加载 JDBC 驱动程序。</p>
<p>通常只有保存以后对日志属性的更改才会生效。您不需要重启服务器。如果您要更改安全日志，则应该重启服务器。</p>
<A NAME="fxbwg"></A><h4>日志类型</h4>
<p>允许您为平面文件日志指定文件或为数据库日志指定 DB。</p>
<p>如果“数据库用户名”或“数据库用户密码”无效，将严重影响 Access Manager 的进程。当 Access Manager 或控制台变得不稳定时，请在 <tt>AMConfig.properties</tt> 中设置以下属性：</p>
<p><i>com.iplanet.am.logstatus=INACTIVE</i></p>
<p>属性设置完毕后，请重启服务器。然后您可以登录控制台来重设日志属性。将 <i>logstatus</i> 属性更改为 <i>ACTIVE</i>，然后重新启动服务器。</p>
<A NAME="fxbrd"></A><h4>数据库用户名</h4>
<p>当“日志类型”属性设置为 DB 时，该属性采用要连接到数据库的用户的名称。</p>
<A NAME="fxcdf"></A><h4>数据库用户密码</h4>
<p>当“日志类型”属性设置为 DB 时，该属性采用数据库用户密码。</p>
<A NAME="fxcep"></A><h4>数据库用户密码（确认）</h4>
<p>确认数据库密码。</p>
<A NAME="fxbvb"></A><h4>数据库驱动程序名</h4>
<p>该属性可使您指定用于日志实现类的驱动程序。</p>
<A NAME="fxbsb"></A><h4>可配置日志字段</h4>
<p>指定将被记录的字段列表。默认情况下，将记录所有的字段。这些字段包括：</p>
<ul><li><p>CONTEXTID</p>
</li>
<li><p>DOMAIN</p>
</li>
<li><p>HOSTNAME</p>
</li>
<li><p>IPADDRESS</p>
</li>
<li><p>LOGGED BY</p>
</li>
<li><p>LOGLEVEL</p>
</li>
<li><p>LOGINID</p>
</li>
<li><p>MESSAGEID</p>
</li>
<li><p>MODULENAME</p>
</li>
</ul>
<p>您至少应该记录 CONTEXTID、DOMAIN、HOSTNAME、LOGINID 和 MESSAGEID。</p>
<A NAME="fxccb"></A><h4>日志验证频率</h4>
<p>该属性用于设置服务器为检测篡改而检验日志的频率（以秒为单位）。默认时间为 3600 秒。该参数仅适用于安全日志。</p>
<A NAME="fxbxe"></A><h4>日志签名时间</h4>
<p>该参数用于设置对日志进行签名的频率（以秒为单位）。默认时间为 900 秒。该参数仅适用于安全日志。</p>
<A NAME="fxcbz"></A><h4>安全日志</h4>
<p>此属性用于启用或禁用安全日志。默认情况下，安全日志为关闭状态。启用安全日志后，可以检测对安全日志进行的未授权更改或篡改。</p>
<A NAME="fxbxt"></A><h4>最大记录数目</h4>
<p>该属性用于设置 Java <!-- was interface. No mapping rule. -->LogReader 接口返回的最大记录数目，而不管有多少记录与读取查询相匹配。默认情况下，将其设置为 500。日志 API 的呼叫者可通过 <i>LogQuery</i> 类覆盖此属性。</p>
<A NAME="fxbwp"></A><h4>每个归档文件中的文件数目</h4>
<p>该属性仅适用于安全日志。该属性用于指定对于后续安全日志，何时需要归档日志文件和密钥库以及何时重新生成安全密钥库。默认情况下每个记录器中含有五个文件。</p>
<A NAME="fxbyw"></A><h4>缓冲大小</h4>
<p>该属性用于指定在日志服务尝试将日志记录写入日志库之前，内存缓冲区中可以存储的最大日志记录数目。默认情况下是一条记录。</p>
<A NAME="fxbvh"></A><h4>DB 失败内存缓冲区大小</h4>
<p>该属性定义数据库 (DB) 日志记录失败时内存中可保留的最大日志记录数目。该属性仅当指定 DB 日志时适用。当 Access Manager 日志服务无法与 DB 保持连接时，它将缓冲直到指定记录的最大数目。该属性默认为“缓冲大小”属性中定义的值的两倍。</p>
<A NAME="fxcea"></A><h4>缓冲时间</h4>
<p>该属性定义日志记录在被发送到日志服务进行记录之前，日志记录将在内存缓冲区中存储的时间。如果已经“启用时间缓冲”，该属性适用。默认值为 3600 秒。</p>
<A NAME="fxbsn"></A><h4>时间缓冲</h4>
<p>选择“开”时，Access Manager 会为即将在内存中缓存的日志记录设置时间限制。时间值在“缓冲时间”属性中设置。</p>

<br />

</body>
</html>
