<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><!-- GenHTML@15714-->
<head>
  <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8">
  <!-- ident      "%Z%%M% %I%     %E% SMI" -->

  <title>向策略添加规则
  </title>
  <script type="text/javascript" src="/com_sun_web_ui/js/browserVersion.js"></script>
  <script type="text/javascript" src="/com_sun_web_ui/js/stylesheet.js"></script>
  <script type="text/javascript"><!-- Empty script so IE5.0 Windows will draw table and button borders --></script>
  <meta name="Copyright" content="Copyright &copy; 2006 by Sun Microsystems, Inc. All Rights Reserved." />
</head>

<body class="HlpBdy">

<A NAME="policy.ruleadd"></A><h4>向策略添加规则</h4>
<ol><li><p><b><A NAME="indexterm-25"></A>如果已创建了策略，请单击要为其添加规则的策略的名称。如果未创建，请参见<A HREF="policy.policynormaladd.html#policy.policynormaladd">创建新的常规策略</A>。</b></p></li>
<li><p><b>在&#8220;规则&#8221;菜单中单击&#8220;新建&#8221;。</b></p></li>
<li><p><b>请为规则选择以下任一默认服务类型。如果策略可用的服务较多时，您看到的列表可能会比较长：</b></p><table border="0" cellspacing="5"><tr><td valign="top"><p>搜索服务</p></td><td valign="top"><p>为搜索服务查询定义授权操作,并通过指定资源的 Web 服务客户机修改调用的协议。</p>
</td></tr><tr><td valign="top"><p>Liberty 个人配置文件服务</p></td><td valign="top"><p>为 Liberty 个人配置文件服务查询定义授权操作,并通过指定资源的 Web 服务客户机修改调用的协议。</p>
</td></tr><tr><td valign="top"><p>URL 策略代理</p></td><td valign="top"><p>定义 URL 策略代理服务的授权操作。它用于定义保护 HTTP 和 HTTPS URL 的策略。这是 Access Manager 策略最常见的用途。</p>
</td></tr></table>
</li>
<li><p><b>单击“下一步”。</b></p></li>
<li><p><b>请输入规则的名称及其资源名称。</b></p><p>目前，Access Manager 策略代理只支持 <tt>http://</tt> 和 <tt> https://</tt> 资源，而不支持使用 IP 地址代替主机名。</p>
<p>协议、主机、端口和资源名称都支持通配符。例如：</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>http*://*:*/*.html</pre>
</td></table><br><p>对于&#8220;URL 策略代理&#8221;服务，如果未输入端口号，则 <tt>http://</tt> 的默认端口号是 80，<tt>https://</tt> 的默认端口号是 443。</p>
<p><hr size="1" noshade><p><b>注 &#8211; </b>步骤 6 和 7 对引用策略不适用。</p>
<hr size="1" noshade></p></li>
<li><p><b>为规则选择操作。根据服务类型，可选择以下选项：</b></p><ul><li><p>查找（搜索服务）</p>
</li>
<li><p>更新（搜索服务）</p>
</li>
<li><p>修改（Liberty 个人配置文件服务）</p>
</li>
<li><p>查询（Liberty 个人配置文件服务）</p>
</li>
<li><p>GET（URL 策略代理）</p>
</li>
<li><p>POST（URL 策略代理）</p>
</li>
</ul>
</li>
<li><p><b>选择操作值。</b></p><ul><li><p>同意交互式操作 &#8212; 为了得到同意而对资源调用 Liberty 交互式操作协议。仅适用于 Liberty 个人配置文件服务类型。</p>
</li>
<li><p>交互式操作值 &#8212; 为了获得某个值而对资源调用 Liberty 交互式操作协议。仅适用于 Liberty 个人配置文件服务类型。</p>
</li>
<li><p>允许 &#8212; 允许您访问与规则中定义的资源相匹配的资源。</p>
</li>
<li><p>拒绝 &#8212; 拒绝您访问与规则中定义的资源相匹配的资源。 </p>
<p>在策略中，拒绝规则始终比允许规则具有优先权。例如，如果某种给定的资源存在两个策略，一个拒绝访问而另一个允许访问，结果为拒绝访问（假定两个策略的条件都满足）。建议谨慎使用拒绝策略，因为它们会导致策略间的潜在冲突。通常来说，在定义策略的过程中，应只使用允许规则，在没有策略适用于实现拒绝条件时使用默认的拒绝规则。</p>
<p>当采用了显示拒绝规则时，即使一个或多个策略允许访问，通过多个不同主题（如角色和/或组成员资格）指定给给定用户的策略可能仍然会导致拒绝访问资源。例如，如果应用于&#8220;员工&#8221;角色的资源的策略为拒绝策略，而应用于&#8220;经理&#8221;角色的同一资源的策略为允许策略，则被分配了&#8220;员工&#8221;和&#8220;经理&#8221;两个角色的用户的策略决策将为拒绝。</p>
<p>解决此问题的一个方法是使用条件插件来设计策略。在上述情况下，将拒绝策略应用于通过&#8220;员工&#8221;角色验证的用户并将允许策略应用于通过&#8220;经理&#8221;角色验证的用户的&#8220;角色条件&#8221;可以帮助区分两种策略。 另一个方法是使用 <tt>authentication level</tt>  条件，其中“经理”角色在更高验证级别进行验证。</p>
</li>
</ul>
</li>
<li><p><b>单击&#8220;完成&#8221;。</b></p></li>
</ol>
<br />

</body>
</html>
