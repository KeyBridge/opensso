------------------------------------------------------------------------------
README file for Open Web Single Sign-On J2EE Agent
------------------------------------------------------------------------------
The contents of this file are subject to the terms
of the Common Development and Distribution License
(the License). You may not use this file except in
compliance with the License.

You can obtain a copy of the License at
https://opensso.dev.java.net/public/CDDLv1.0.html or
opensso/legal/CDDLv1.0.txt
See the License for the specific language governing
permission and limitations under the License.

When distributing Covered Code, include this CDDL
Header Notice in each file and include the License file
at opensso/legal/CDDLv1.0.txt.
If applicable, add the following below the CDDL Header,
with the fields enclosed by brackets [] replaced by
your own identifying information:
"Portions Copyrighted [year] [name of copyright owner]"

$Id: README,v 1.10 2007-09-14 00:12:10 madan_ranganath Exp $

Copyright 2006 Sun Microsystems Inc. All Rights Reserved
------------------------------------------------------------------------------

%% Contents:
    %% 1. Build requirements
    %% 2. Library dependencies
        %% 2.1 Obtaining OpenSSO Agents Common Installer libraries
        %% 2.2 Obtaining OpenSSO ClientSDK library
        %% 2.3 Obtaining OpenFM ClientSDK library
        %% 2.4 Obtaining J2EE Container specific libraries
    %% 3. Building the workspace
        %% 3.1 build target
        %% 3.2 clean target
        %% 3.3 usage target
        %% 3.4 appserver_v9 target
        %% 3.5 weblogic_v10 target


%% 1. Build requirements

The OpenSSO J2EE Agent workspace uses Apache Ant as the build tool. 
The build scripts in this workspace use features not present in 
releases of Ant prior to 1.6.5.  Thus, in order to build this workspace 
you must have Ant version 1.6.5 or above installed and available in 
your system path.

The sources in this workspace should be compiled using JDK 5.0 with 
the source and target levels set to "1.4". In order to allow this, you 
must ensure that JDK 5.0 is present in your system path and the JAVA_HOME 
environment variable is setup correctly pointing to its location.


%% 2. Library dependencies

The OpenSSO J2EE Agent sources depend upon a few third-party libraries 
that are not included as a part of the workspace and must be obtained 
directly from the library vendor or distributor. Some of these libraries 
are available in source distribution form and must be built locally 
before they can be used. 

The libraries needed for compiling OpenSSO J2EE Agent sources are:

   - OpenSSO Agents Common Installer libraries
   - OpenSSO ClientSDK library
   - J2EE Container specific libraries

Once these libraries are available, they should be placed under the 
extlib directory of the specific J2EE Container in workspace. For example,
the libraries for Sun Application Server 8.1/8.2/9.0/9.1 agent should be placed
under appserver/v9/extlib directory.  Any library placed in this directory 
is automatically included in the classpath during the compilation phase of
the build process.

The following subsections briefly describe how these libraries may be 
obtained. These instructions are provided for your convenience only and
are not intended to replace or invalidate the procedures/guidelines set
by the library vendor or distributor for obtaining those libraries. Before
you follow these instructions, you must agree to abide by any terms and
conditions set forth by the library vendor or distributor. In case any of
these instructions are in contradiction to such terms or conditions, you 
must disregard those instructions and instead follow the ones provided by
the library vendor or distributor in accordance with their terms and 
conditions.

%% 2.1 Obtaining OpenSSO Agents Common Installer libraries

The OpenSSO Agents Common installer libraries opensso-installtools.jar and 
opensso-installtools-launcher.jar can be built from the OpenSSO Agents Common 
Installer workspace, for example in opensso/products/installtools.

Follow these steps to obtain the libraries:
2.1.1 Check out the OpenSSO Agents Common installer workspace.
2.1.2 Set JAVA_HOME to the location of JDK 1.5.
2.1.3 At the root of the workspace, at opensso/products/installtools/, run: ant
2.1.4 Copy the libraries opensso-installtools.jar, and opensso-installtools-launcher.jar 
from the dist directory(opensso/products/installtools/built/dist) of the OpenSSO Agents 
Common installer workspace into extlib directory of the specific J2EE Container 
directory in this workspace. For Sun Application Server 8.1/8.2/9.0/9.1, the directory is 
appserver/v9/extlib. For BEA WebLogic 10 agent, the directory is 
opensso/products/j2eeagents/weblogic/v10/extlib.

%% 2.2 Obtaining OpenSSO ClientSDK library

2.2.1 The OpenSSO ClientSDK library amclientsdk.jar can be obtained from 
the OpenSSO nightly build.

Follow these steps to obtain the library:
2.2.1.1 download the latest amclientsdk.jar from:
    http://download.java.net/general/opensso/nightly/amserver/
2.2.1.2 Copy the downloaded amclientsdk.jar into extlib directory of 
the specific J2EE Container directory in this workspace. For Sun Application 
Server 8.1/8.2/9.0/9.1, the directory is appserver/v9/extlib. For BEA 
WebLogic 10 agent, the directory is opensso/products/j2eeagents/weblogic/v10/extlib.


2.2.2 Alternatively the OpenSSO ClientSDK library amclientsdk.jar can be
built from the OpenSSO workspace.

Follow these steps to obtain the library:
2.2.2.1 Check out the OpenSSO workspace.
2.2.2.2 Set JAVA_HOME to the location of JDK 1.5.
2.2.2.3 At the root of the workspace, run: ant clientsdk
2.2.2.4 Copy the library amclientsdk.jar from the built/dist of
the OpenSSO workspace into extlib directory of the specific J2EE Container
directory in this workspace. For Sun Application Server 8.1/8.2/9.0/9.1, the 
directory is appserver/v9/extlib. For BEA WebLogic 10 agent, the directory 
is opensso/products/j2eeagents/weblogic/v10/extlib.


%% 2.3 Obtaining OpenFM ClientSDK library

2.3.1 The OpenFM ClientSDK library famclientsdk.jar can be obtained from 
the OpenSSO nightly build.

Follow these steps to obtain the library:
2.3.1.1 download the latest famclientsdk.jar from:
    http://download.java.net/general/opensso/nightly/openfm/
2.3.1.2 Copy the downloaded famclientsdk.jar into extlib directory of 
the specific J2EE Container directory in this workspace. For Sun Application 
Server 8.1/8.2/9.0/9.1, the directory is appserver/v9/extlib. For BEA 
WebLogic 10 agent, the directory is opensso/products/j2eeagents/weblogic/v10/extlib.

2.3.2 Alternatively the OpenFM ClientSDK library famclientsdk.jar can be
built from the OpenSSO workspace.

Follow these steps to obtain the library:
2.3.2.1 Check out the OpenSSO workspace.
2.3.2.2 Set JAVA_HOME to the location of JDK 1.5.
2.3.2.3 At the root of the workspace (under opensso/products/federation/openfm), 
run: ant clientsdk 
2.3.2.4 Copy the library famclientsdk.jar from the built/dist of
the OpenSSO workspace into extlib directory of the specific J2EE Container
directory in this workspace. For Sun Application Server 8.1/8.2/9.0/9.1, the 
directory is appserver/v9/extlib. For BEA WebLogic 10 agent, the directory 
is opensso/products/j2eeagents/weblogic/v10/extlib.

%% 2.4 Obtaining J2EE container specific libraries
The J2EE Container specific libraries can be obtained from the J2EE 
container installation.

2.4.1 Obtaining libraries for Sun Application Server 8.1/8.2/9.0/9.1
Follow these steps to obtain the libraries for Sun Application Server 8.1 or 8.2 or
9.0 or 9.1:
2.4.1.1 Install Sun Application Server 8.1 or 8.2 or 9.0 or 9.1
2.4.1.2 If you are installing OpenSSO J2EE Agent on Sun Application Server 
8.1 or 8.2, copy j2ee.jar from the lib directory of the server installation 
into the appserver/v9/extlib 
2.4.1.3 If you are installing OpenSSO J2EE Agent on Sun Application Server 
9.0 or 9.1, copy javaee.jar from the lib directory of the server installation 
into the appserver/v9/extlib 
2.4.1.4 Copy the appserv-ext.jar and appserv-rt.jar from the 
lib directory of the server installation into the appserver/v9/extlib 
directory of this workspace.

2.4.2 Obtaining libraries for WebLogic 10.0 
Follow these steps to obtain the libraries for BEA WebLogic 10.0:
2.4.2.1 Install BEA 10.0 server 
2.4.2.2 If you are building OpenSSO J2EE Agent on BEA WebLogic 10.0 Server, 
copy weblogic.jar and api.jar both from the lib directory of the server 
installation(for example from bea\wlserver_10.0\server\lib\) into 
the opensso/products/j2eeagents/weblogic/v10/extlib/ directory of this workspace 
2.4.2.3 Copy the com.bea.core.weblogic.security_2.0.0.0.jar from the 
modules directory of the server installation(for example from \bea\modules\) 
into the opensso/products/j2eeagents/weblogic/v10/extlib directory of this workspace.


%% 3. Building the workspace

The workspace build system offers several build targets. You can view the
available targets by issuing the ant command from the root of the
workspace. The default target that is executed is the usage target which
displays a brief description about the other targets. Currently the main
targets available in the workspace are:
   
     - build         : compiles the sources
     - clean         : deletes the generated files
     - usage         : displays this usage message
     - appserver_v9 : build the Sun Appserver 8.1/8.2/9.0/9.1 agent
     - weblogic_v10 : build the WebLogic 10.0 agent

%% 3.1 build target

The build target compiles the common sources


%% 3.2 clean target

The clean target removes all the build output directories.


%% 3.3 usage target

Displays a list of available targets along with a brief description of
each available target for quick reference.

%% 3.4 appserver_v9 target

The appserver_v9 target first invokes the build target and then 
delegates the further processing to the build.xml files present under 
the appserver and appserver/v9 directories.  Upon successful execution,
a zip file appserver_v9_agent.zip will be created under built/appserver_v9/dist 
directory, and it can be used later to install the agent.

%% 3.5 weblogic_v10 target

The weblogic_v10 target first invokes the build target and then 
delegates the further processing to the build.xml files present under 
the weblogic and weblogic/v10 directories.  Upon successful execution,
a zip file weblogic_v10_agent.zip will be created under built/weblogic_v10/dist 
directory, and it can be used later to install the agent.


