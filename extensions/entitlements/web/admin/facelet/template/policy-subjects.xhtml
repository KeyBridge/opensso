<?xml version='1.0' encoding='UTF-8'?>
<span
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:o="http://opensso.dev.java.net">
    <div class="section-outer">
        <o:box>
            <ui:define name="body">
                <div class="section-inner">
                    <span class="section-head">
                        <span class="section-title">
                            <ice:outputText value="New Policy Subjects"/>
                        </span>
                    </span>
                    <div class="clear"></div>
                    <ice:panelGrid
                        columns="3"
                        styleClass="policy-create-conditions"
                        columnClasses="conditions-selected conditions-gutter conditions-available">
                        <ice:panelGroup
                            style="width: 100%">
                            <o:subjectpanel
                                viewSubject="#{policySubjectsBean.privilegeBean.viewSubject}"/>
                            <ice:panelGroup
                                visible="#{policySubjectsBean.privilegeBean.viewSubject == null}"
                                styleClass="drop-target"
                                dropTarget="true"
                                dropListener="#{policySubjectsHandler.subjectDropListener}">
                                <ice:outputText
                                    value="Drop condition or expression here ..."/>
                            </ice:panelGroup>
                        </ice:panelGroup>
                        <ice:panelGroup/>
                        <ice:panelGroup
                            style="width: 100%">
                            <ice:panelSeries
                                value="#{subjectContainers}"
                                var="subjectContainer">
                                <o:multipanel
                                    visible="true"
                                    expanded="#{subjectContainer.expanded}"
                                    bean="#{subjectContainer}"
                                    handler="#{basicMultiPanelHandler}"
                                    collapsible="true"
                                    removeable="false">
                                    <ui:define name="panel-title">
                                        <ice:panelGroup>
                                            <ice:outputText value="#{subjectContainer.subjectType.title}"/>
                                        </ice:panelGroup>
                                    </ui:define>
                                    <ui:define name="panel-body">
                                        <ice:panelGrid
                                            columns="2">
                                            <ice:graphicImage
                                                value="../image/search.png"/>
                                            <ice:inputText
                                                value="#{subjectContainer.filter}"
                                                onkeyup="typeSubmit(this);"/>
                                        </ice:panelGrid>
                                        <ice:panelSeries
                                            value="#{subjectContainer.viewSubjects}"
                                            var="viewSubject">
                                            <ice:panelGroup
                                                styleClass="draggable"
                                                draggable="true"
                                                dragValue="#{viewSubject}"
                                                dragOptions="dragGhost">
                                                <ice:panelGrid columns="2">
                                                    <ice:graphicImage value="#{viewSubject.subjectType.subjectIconUri}"/>
                                                    <ice:panelGroup>
                                                        <ice:outputText value="#{viewSubject.title}"/>
                                                    </ice:panelGroup>
                                                </ice:panelGrid>
                                            </ice:panelGroup>
                                        </ice:panelSeries>
                                    </ui:define>
                                </o:multipanel>
                                <ice:panelGroup
                                    style="height: 10px;">
                                </ice:panelGroup>
                            </ice:panelSeries>
                            <o:multipanel
                                visible="true"
                                expanded="#{subjectExpressionPanelBean.expanded}"
                                bean="#{subjectExpressionPanelBean}"
                                handler="#{basicMultiPanelHandler}"
                                collapsible="true"
                                removeable="false">
                                <ui:define name="panel-title">
                                    <ice:panelGroup>
                                        <ice:outputText value="Expressions"/>
                                    </ice:panelGroup>
                                </ui:define>
                                <ui:define name="panel-body">
                                    <ice:panelSeries
                                        value="#{expressionSubjectTypes}"
                                        var="subjectType">
                                        <ice:panelGroup
                                            styleClass="draggable"
                                            draggable="true"
                                            dragValue="#{subjectType}"
                                            dragOptions="dragGhost">
                                            <ice:panelGrid columns="2">
                                                <ice:graphicImage value="#{subjectType.subjectIconUri}"/>
                                                <ice:panelGroup>
                                                    <ice:outputText value="#{subjectType.title}"/>
                                                </ice:panelGroup>
                                            </ice:panelGrid>
                                        </ice:panelGroup>
                                    </ice:panelSeries>
                                </ui:define>
                            </o:multipanel>
                        </ice:panelGroup>
                    </ice:panelGrid>
                </div>
            </ui:define>
        </o:box>
    </div>
</span>
