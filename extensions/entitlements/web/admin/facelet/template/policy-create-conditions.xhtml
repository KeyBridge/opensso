<?xml version='1.0' encoding='UTF-8'?>
<span
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:o="http://opensso.dev.java.net">
    <ice:panelTooltip
        id="invisiblett"
        visible="false"/>
    <ice:panelTooltip
        styleClass="tooltip-error"
        id="opndtt">
        <f:facet name="body">
            <ice:outputText
                styleClass="tooltip-error"
                value="Please drag a condition before dragging this operator"/>
        </f:facet>
    </ice:panelTooltip>
    <ice:panelTooltip
        styleClass="tooltip-error"
        id="nndtt">
        <f:facet name="body">
            <ice:outputText
                styleClass="tooltip-error"
                value="Not is not allowed here"/>
        </f:facet>
    </ice:panelTooltip>
    <ice:panelTooltip
        styleClass="tooltip-error"
        id="cndtt">
        <f:facet name="body">
            <ice:outputText
                styleClass="tooltip-error"
                value="Please drag an operator before dragging this condition"/>
        </f:facet>
    </ice:panelTooltip>
    <ice:panelGrid
        columns="3"
        styleClass="policy-create-conditions"
        columnClasses="conditions-selected conditions-gutter conditions-available">
        <ice:panelGroup
            style="width: 100%">
            <c:forEach
                var="viewCondition"
                items="#{policyCreateWizardBean.priviligeBean.viewConditions}">
                <o:multipanel
                    collapsible="true"
                    removeable="#{!viewCondition.conditionType.expression}"
                    visible="#{viewCondition.visible}"
                    expanded="#{viewCondition.expanded}"
                    bean="#{viewCondition}"
                    handler="#{viewConditionsHandler}">
                    <ui:define name="panel-title">
                        #{viewCondition.name != null ? viewCondition.name : viewCondition.conditionType.name}
                    </ui:define>
                    <ui:define name="panel-body">
                        <ui:include src="#{viewCondition.conditionType.template}">
                            <ui:param
                                name="viewCondition"
                                value="#{viewCondition}"/>
                        </ui:include>
                    </ui:define>
                </o:multipanel>
            </c:forEach>
            <ice:panelGroup
                styleClass="drop-target"
                dropTarget="true"
                dropListener="#{policyCreateWizardHandler.conditionDropListener}">
                Drop here ...
            </ice:panelGroup>
        </ice:panelGroup>
        <ice:panelGroup/>
        <ice:panelGrid
            columns="1"
            style="width: 100%">
            <o:multipanel
                visible="true"
                expanded="true"
                collapsible="false"
                removeable="false">
                <ui:define name="panel-title">
                    <ice:panelGroup>
                        <ice:outputText value="Condition Types"/>
                    </ice:panelGroup>
                </ui:define>
                <ui:define name="panel-body">
                    <span class="condition-section-head">
                        <span class="condition-section-title">
                            <ice:outputText value="Conditions"/>
                        </span>
                    </span>
                    <div class="clear"></div>
                    <ice:panelSeries
                        value="#{conditionTypes}"
                        var="conditionType">
                        <ice:panelGroup
                            rendered="#{!conditionType.expression}"
                            draggable="#{policyCreateWizardBean.conditionTypesDraggable}"
                            panelTooltip="#{policyCreateWizardBean.conditionTypesDraggable ? ':::invisiblett' : ':::cndtt'}"
                            dragValue="#{conditionType}"
                            dragOptions="dragGhost">
                            <ice:panelGrid columns="2">
                                <ice:graphicImage value="#{conditionType.conditionIconUri}"/>
                                <ice:panelGroup>
                                    <ice:outputText value="#{conditionType.name}"/>
                                </ice:panelGroup>
                            </ice:panelGrid>
                        </ice:panelGroup>
                    </ice:panelSeries>
                    <span class="condition-section-head">
                        <span class="condition-section-title">
                            <ice:outputText value="Condition Operators"/>
                        </span>
                    </span>
                    <div class="clear"></div>
                    <ice:panelGroup>
                        <ice:panelGroup
                            draggable="#{policyCreateWizardBean.orConditionDraggable}"
                            panelTooltip="#{policyCreateWizardBean.orConditionDraggable ? 'invisiblett' : 'opndtt'}"
                            dragValue="#{orConditionType}"
                            dragOptions="dragGhost">
                            <ice:panelGrid columns="2">
                                <ice:graphicImage value="#{orConditionType.conditionIconUri}"/>
                                <ice:panelGroup>
                                    <ice:outputText value="#{orConditionType.name}"/>
                                </ice:panelGroup>
                            </ice:panelGrid>
                        </ice:panelGroup>
                    </ice:panelGroup>
                    <ice:panelGroup>
                        <ice:panelGroup
                            draggable="#{policyCreateWizardBean.andConditionDraggable}"
                            panelTooltip="#{policyCreateWizardBean.andConditionDraggable ? 'invisiblett' : 'opndtt'}"
                            dragValue="#{andConditionType}"
                            dragOptions="dragGhost">
                            <ice:panelGrid columns="2">
                                <ice:graphicImage value="#{andConditionType.conditionIconUri}"/>
                                <ice:panelGroup>
                                    <ice:outputText value="#{andConditionType.name}"/>
                                </ice:panelGroup>
                            </ice:panelGrid>
                        </ice:panelGroup>
                    </ice:panelGroup>
                    <ice:panelGroup>
                        <ice:panelGroup
                            draggable="#{policyCreateWizardBean.notConditionDraggable}"
                            panelTooltip="#{policyCreateWizardBean.notConditionDraggable ? 'invisiblett' : 'nndtt'}"
                            dragValue="#{notConditionType}"
                            dragOptions="dragGhost">
                            <ice:panelGrid columns="2">
                                <ice:graphicImage value="#{notConditionType.conditionIconUri}"/>
                                <ice:panelGroup>
                                    <ice:outputText value="#{notConditionType.name}"/>
                                </ice:panelGroup>
                            </ice:panelGrid>
                        </ice:panelGroup>
                    </ice:panelGroup>
                </ui:define>
            </o:multipanel>
        </ice:panelGrid>

    </ice:panelGrid>
</span>
