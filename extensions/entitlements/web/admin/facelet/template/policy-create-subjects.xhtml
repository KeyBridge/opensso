<?xml version='1.0' encoding='UTF-8'?>
<span
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:o="http://opensso.dev.java.net">
    <ice:panelGrid
        columns="3"
        styleClass="policy-create-subjects"
        columnClasses="subjects-selected subjects-gutter subjects-available">
        <ice:panelGroup
            style="width: 100%">
            <c:forEach
                var="subjectContainer"
                items="#{policyCreateWizardBean.privilegeBean.subjectContainers}">
                <o:multipanel
                    collapsible="true"
                    removeable="true"
                    visible="#{subjectContainer.visible}"
                    expanded="#{subjectContainer.expanded}"
                    bean="#{subjectContainer}"
                    handler="#{subjectContainersHandler}">
                    <ui:define name="panel-title">
                        #{subjectContainer.name} (#{subjectContainer.numberSelected})
                    </ui:define>
                    <ui:define name="panel-body">
                        <ui:include src="#{subjectContainer.subjectContainerType.template}">
                            <ui:param
                                name="subjectContainer"
                                value="#{subjectContainer}"/>
                        </ui:include>
                    </ui:define>
                </o:multipanel>
            </c:forEach>
            <ice:panelGroup
                styleClass="drop-target"
                dropTarget="true"
                dropListener="#{policyCreateWizardHandler.subjectContainerDropListener}">
                Drop here ...
            </ice:panelGroup>
        </ice:panelGroup>
        <ice:panelGroup/>
        <ice:panelGrid
            columns="1"
            style="width: 100%">
            <o:multipanel
                expanded="true"
                visible="true"
                collapsible="false"
                removeable="false">
                <ui:define name="panel-title">
                    <ice:panelGroup>
                        <ice:outputText value="Subject Types"/>
                    </ice:panelGroup>
                </ui:define>
                <ui:define name="panel-body">
                    <ice:panelSeries
                        value="#{subjectContainerTypes}"
                        var="subjectContainerType">
                        <ice:panelGroup
                            dragValue="#{subjectContainerType}"
                            dragOptions="dragGhost"
                            draggable="true">
                            <ice:panelGrid columns="2">
                                <ice:graphicImage
                                    value="#{subjectContainerType.subjectIconUri}"/>
                                <ice:outputText
                                    value="#{subjectContainerType.name}"/>
                            </ice:panelGrid>
                        </ice:panelGroup>
                    </ice:panelSeries>
                </ui:define>
            </o:multipanel>
        </ice:panelGrid>
    </ice:panelGrid>
</span>
