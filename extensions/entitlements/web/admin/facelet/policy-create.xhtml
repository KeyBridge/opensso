<?xml version='1.0' encoding='UTF-8'?>
<ui:composition template="template/page.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:o="http://opensso.dev.java.net">
    <ui:define name="panel-title">
        <ice:outputText value="${msg.policyCreatePanelTitle}" />
    </ui:define>
    <ui:define name="panel-details">
        <ice:outputText value="${msg.policyCreatePanelDetails}" />
    </ui:define>
    <ui:define name="panel-body">
        <o:wizard
            steps="5"
            wizardHandler="#{policyCreateWizardHandler}"
            wizardBean="#{policyCreateWizardBean}">
            <ui:define name="wizard-steps">
                <o:wstep
                    step="0"
                    label="Step 1: Getting started">
                    <ui:define name="wizard-step-body">
                        <span class="section-head">
                            <span class="section-title">
                                <ice:outputText value="New Policy Name and Description"/>
                            </span>
                            <span class="section-links">
                                <o:nbsp/>
                            </span>
                        </span>
                        <div class="clear"></div>
                        <ice:panelGrid
                            columns="2"
                            columnClasses="label-column,input-column">
                            <ice:panelGroup>
                                <ice:outputLabel
                                    for="policy-name"
                                    value="New Policy Name"/>
                            </ice:panelGroup>
                            <ice:panelGroup>
                                <ice:inputText id="policy-name"/>
                            </ice:panelGroup>
                            <ice:panelGroup>
                                <ice:outputLabel
                                    for="policy-description"
                                    value="New Policy Description"/>
                            </ice:panelGroup>
                            <ice:inputTextarea
                                id="policy-description"
                                styleClass="policy-description"/>
                        </ice:panelGrid>
                        <span class="section-head">
                            <span class="section-title">
                                <ice:outputText
                                    value="Application Type"/>
                            </span>
                            <span class="section-title-links">
                                <o:nbsp/>
                            </span>
                        </span>
                        <div class="clear"></div>
                        <ice:panelGrid
                            columns="2"
                            columnClasses="label-column,input-column">
                            <ice:panelGroup>
                                <ice:outputLabel
                                    for="application-type"
                                    value="Application Type"/>
                            </ice:panelGroup>
                            <ice:panelGroup>
                                <ice:selectOneMenu
                                    id="application-type"
                                    value="#{applicationsBean.applicationBean.name}">
                                    <f:selectItems
                                        value="#{applicationsBean.applicationSelectItems}"/>
                                </ice:selectOneMenu>
                            </ice:panelGroup>
                        </ice:panelGrid>
                    </ui:define>
                </o:wstep>
                <o:wstep
                    step="1"
                    label="Step 2: Select or add a resource to protect">
                    <ui:define name="wizard-step-body">
                        <span class="section-head">
                            <span class="section-title">
                                <ice:outputText value="URL Resources"/>
                            </span>
                            <span class="section-links">
                                <o:clink type="add"/>
                                <ice:outputText value="|"/>
                                <o:clink type="search"/>
                            </span>
                        </span>
                        <div class="clear"></div>
                        <ice:panelGroup
                            scrollHeight="200px">
                            <ice:panelSeries
                                styleClass="url-resource"
                                var="urlResource"
                                value="#{urlResourcesBean.urlResources}">
                                <ice:panelGrid columns="2">
                                    <ice:selectBooleanCheckbox
                                        id="resource-checkbox"
                                        value="#{urlResource.selected}"
                                        partialSubmit="true"/>
                                    <ice:outputLabel
                                        for="resource-checkbox"
                                        value="#{urlResource.pattern}"/>
                                </ice:panelGrid>
                                <ice:panelGroup
                                    styleClass="url-resource-excepted"
                                    visible="#{urlResource.selected}">
                                    <ice:selectBooleanCheckbox
                                        id="resource-excepted-checkbox"
                                        value="#{urlResource.excepted}"
                                        partialSubmit="true">
                                    </ice:selectBooleanCheckbox>
                                    <ice:outputLabel
                                        for="resource-excepted-checkbox">
                                        Exceptions?
                                    </ice:outputLabel>
                                    <ice:panelGrid
                                        visible="#{urlResource.urlResourceExceptionsBean.excepted}"
                                        columns="1">
                                        <ice:panelGroup
                                            styleClass="sub-section-head">
                                            <ice:outputText
                                                value="Enter parts to exclude"/>
                                        </ice:panelGroup>
                                        <ice:panelSeries
                                            value="#{urlResource.urlResourceExceptionsBean.urlResourceExceptionBeans}"
                                            var="urlResourceExceptionBean">
                                            <ice:panelGroup>
                                                <ice:outputLabel
                                                    for="url-resource-exception-inputtext"
                                                    value="#{urlResource.pattern}/"/>
                                                <ice:inputText
                                                    id="url-resource-exception-inputtext"
                                                    value="#{urlResourceExceptionBean.part}"/>
                                            </ice:panelGroup>
                                        </ice:panelSeries>
                                        <ice:panelGrid
                                            styleClass="button-group"
                                            columns="2">
                                            <o:button
                                                type="add"
                                                handler="#{urlResourceExceptionsHandler}"
                                                bean="#{urlResource.urlResourceExceptionsBean}"/>
                                            <o:button
                                                type="finish"/>
                                        </ice:panelGrid>
                                    </ice:panelGrid>
                                </ice:panelGroup>
                            </ice:panelSeries>
                        </ice:panelGroup>
                    </ui:define>
                </o:wstep>
                <o:wstep
                    step="2"
                    label="Step 3: Select or add the users that this policy applies to">
                    <ui:define name="wizard-step-body">
                        Step 3 ...
                    </ui:define>
                </o:wstep>
                <o:wstep
                    step="3"
                    label="Step 4: Advanced settings">
                    <ui:define name="wizard-step-body">
                        Step 4 ...
                    </ui:define>
                </o:wstep>
                <o:wstep
                    step="4"
                    label="Step 5: Review and complete">
                    <ui:define name="wizard-step-body">
                        Step 5 ...
                    </ui:define>
                </o:wstep>
            </ui:define>
        </o:wizard>
    </ui:define>
</ui:composition>
