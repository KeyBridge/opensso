<?xml version='1.0' encoding='UTF-8'?>
<ui:composition
    template="template/page.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:o="http://opensso.dev.java.net">
        
    <ui:define name="panel-title">
        <ice:outputText value="#{msg.policyCreatePanelTitle}" />
    </ui:define>
    <ui:define name="panel-details">
        <ice:outputText value="#{msg.policyCreatePanelDetails}" />
    </ui:define>
    <ui:define name="panel-body">
        <o:wizard
            steps="5"
            wizardHandler="#{policyCreateWizardHandler}"
            wizardBean="#{policyCreateWizardBean}">
            <ui:define name="wizard-steps">
                <o:wstep
                    step="0"
                    label="Step 1: Name, Description, and Application">
                    <ui:define name="wizard-step-body">
                        <ui:include src="template/policy-create-name.xhtml"/>
                    </ui:define>
                </o:wstep>
                <o:wstep
                    step="1"
                    label="Step 2: Resources (#{o:size(policyCreateWizardBean.privilegeBean.viewEntitlement.resources)})">
                    <ui:define name="wizard-step-body">
                        <ui:include
                            src="#{policyCreateWizardBean.viewApplication.viewApplicationType.resourceTemplate}">
                                <ui:param
                                    name="availableResources"
                                    value="#{policyCreateWizardBean.availableResources}"/>
                                <ui:param
                                    name="viewEntitlement"
                                    value="#{policyCreateWizardBean.privilegeBean.viewEntitlement}"/>
                        </ui:include>
                    </ui:define>
                </o:wstep>
                <o:wstep
                    step="2"
                    label="Step 3: Subjects (#{policyCreateWizardBean.privilegeBean.viewSubject != null ? policyCreateWizardBean.privilegeBean.viewSubject : 0})">
                    <ui:define name="wizard-step-body">
                        <ui:include src="template/policy-create-subjects.xhtml"/>
                    </ui:define>
                </o:wstep>
                <o:wstep
                    step="3"
                    label="Step 4: Advanced">
                    <ui:define name="wizard-step-body">
                        <ui:include src="template/policy-create-advanced.xhtml"/>
                    </ui:define>
                </o:wstep>
                <o:wstep
                    step="4"
                    label="Step 5: Review">
                    <ui:define name="wizard-step-body">
                        <ui:include src="template/policy-create-summary.xhtml"/>
                    </ui:define>
                </o:wstep>
            </ui:define>
        </o:wizard>
    </ui:define>
</ui:composition>
