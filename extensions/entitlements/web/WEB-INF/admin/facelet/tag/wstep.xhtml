<?xml version='1.0' encoding='UTF-8'?>
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:o="http://opensso.dev.java.net">

    <a name="wstep#{step}"/>
    <ice:panelCollapsible
        expanded="#{wizardBean.wizardStepBeans[step].expanded}"
        disabled="#{!wizardBean.wizardStepBeans[step].enabled}"
        actionListener="#{wizardHandler.expandListener}"
        visible="#{true}">

        <f:attribute name="step" value="#{step}"/>

        <f:facet name="header">
            <ice:panelGroup>
                <ice:outputText value="#{label}"/>
            </ice:panelGroup>
        </f:facet>
        <ui:insert name="wizard-step-body"/>
        <ice:panelGroup
            styleClass="button-container">
            <ice:panelGrid
                columns="4"
                styleClass="button-group">
                <o:wbuttons
                    bean="#{wizardBean}"
                    handler="#{wizardHandler}"
                    step="#{step}"/>
            </ice:panelGrid>
        </ice:panelGroup>
        <script type="text/javascript">
            focusWizardStep('#{step}');
        </script>
    </ice:panelCollapsible>
</ui:composition>
