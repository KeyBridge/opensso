<?xml version='1.0' encoding='UTF-8'?>
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:o="http://opensso.dev.java.net"
    xmlns:f="http://java.sun.com/jsf/core">

    <ice:panelGroup
        styleClass="condition-panel"
        rendered="#{viewCondition != null}">

        <o:multipanel
            collapsible="true"
            removeable="true"
            visible="#{viewCondition.visible}"
            expanded="#{viewCondition.expanded}"
            bean="#{viewCondition}"
            handler="#{viewConditionsHandler}">

            <ui:define name="panel-title">
                <ice:panelGrid
                    columns="3">
                    <ice:graphicImage
                        value="#{viewCondition.conditionType.conditionIconUri}"/>
                    <ice:outputText
                        style="font-weight: bold"
                        value="#{o:truncate(viewCondition,viewCondition.titleWidth)}"/>
                    <ice:commandLink
                        styleClass="command-link"
                        actionListener="#{viewConditionsHandler.titlePopupListener}"
                        visible="#{o:length(viewCondition) > viewCondition.titleWidth}">
                        <f:attribute
                            name="viewCondition"
                            value="#{viewCondition}"/>
                        <ice:outputText
                            value="View (#{viewCondition.size} total)"/>
                    </ice:commandLink>
                </ice:panelGrid>
            </ui:define>
            <ui:define name="panel-body">
                <ui:include
                    src="/admin/facelet/template/condition-template-includer.xhtml">
                    <ui:param name="viewCondition" value="#{viewCondition}"/>
                </ui:include>
            </ui:define>
        </o:multipanel>
    </ice:panelGroup>
</ui:composition>