<?xml version='1.0' encoding='UTF-8'?>
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component">
    <ice:panelGrid
        style="margin-left: auto; margin-right: auto"
        columns="3">
        <ice:panelGroup
            dropTarget="true"
            dropListener="#{chooserSubjectHandler.dropListener}"
            dropValue="#{chooserSubjectContainer.available}">
            <ice:dataTable
                value="#{chooserSubjectContainer.filteredAvailable}"
                var="chooserSubject"
                scrollable="true"
                scrollHeight="200px">
                <f:facet name="header">
                    <ice:outputText value="Available"/>
                </f:facet>
                <ice:column>
                    <f:facet name="header">
                        <ice:panelGrid columns="2">
                            <ice:graphicImage value="../image/search.png"/>
                            <ice:inputText
                                onkeyup="typeSubmit(this);"
                                partialSubmit="true"
                                value="#{chooserSubjectContainer.availableFilter}"
                                valueChangeListener="#{chooserSubjectHandler.filterListener}">
                                    <f:attribute
                                        name="master"
                                        value="#{chooserSubjectContainer.available}"/>
                                    <f:attribute
                                        name="filtered"
                                        value="#{chooserSubjectContainer.filteredAvailable}"/>
                            </ice:inputText>
                        </ice:panelGrid>
                    </f:facet>
                    <ice:rowSelector
                        value="#{chooserSubject.selected}"
                        selectionListener="#{chooserSubjectHandler.selectionListener}"
                        multiple="true"/>
                    <ice:panelGroup
                        styleClass="subject-chooser-subject"
                        draggable="#{chooserSubject.selected}"
                        dragValue="#{chooserSubjectContainer.available}"
                        dragOptions="dragGhost">
                        <ice:panelGrid
                            styleClass="subject-list"
                            columns="2">
                            <ice:panelGroup>
                                <ice:graphicImage
                                    value="../image/user.png"/>
                            </ice:panelGroup>
                            <ice:panelGroup>
                                <ice:outputText
                                    value="#{chooserSubject.name}"/>
                            </ice:panelGroup>
                        </ice:panelGrid>
                    </ice:panelGroup>
                </ice:column>
            </ice:dataTable>
        </ice:panelGroup>

        <ice:panelGrid
            styleClass="subject-chooser-button-group"
            columns="1">
            <ice:panelGrid
                styleClass="sub-button-group"
                columns="1">
                <ice:panelGroup
                    styleClass="button-wrapper add">
                    <ice:commandLink
                        styleClass="button"
                        actionListener="#{chooserSubjectHandler.addSelectedListener}"
                        partialSubmit="true">
                        Add Selected
                        <ice:graphicImage
                            styleClass="right"
                            value="../image/chooser-add.png"/>
                    </ice:commandLink>
                </ice:panelGroup>
                <ice:panelGroup
                    styleClass="button-wrapper add">
                    <ice:commandLink
                        actionListener="#{chooserSubjectHandler.addAllListener}"
                        styleClass="button"
                        partialSubmit="true">
                        Add All
                        <ice:graphicImage
                            styleClass="right"
                            value="../image/chooser-add-all.png"/>
                    </ice:commandLink>
                </ice:panelGroup>
            </ice:panelGrid>

            <ice:panelGrid
                styleClass="sub-button-group"
                columns="1">
                <ice:panelGroup
                    styleClass="button-wrapper remove">
                    <ice:commandLink
                        actionListener="#{chooserSubjectHandler.removeSelectedListener}"
                        styleClass="button"
                        partialSubmit="true">
                        <ice:panelGroup>
                            <ice:graphicImage
                                styleClass="left"
                                value="../image/chooser-remove.png"/>
                            Remove Selected
                        </ice:panelGroup>
                    </ice:commandLink>
                </ice:panelGroup>
                <ice:panelGroup
                    styleClass="button-wrapper remove">
                    <ice:commandLink
                        actionListener="#{chooserSubjectHandler.removeAllListener}"
                        styleClass="button"
                        partialSubmit="true">
                        <ice:graphicImage
                            styleClass="left"
                            value="../image/chooser-remove-all.png"/>
                        Remove All
                    </ice:commandLink>
                </ice:panelGroup>
            </ice:panelGrid>
        </ice:panelGrid>

        <ice:panelGroup
            dropTarget="true"
            dropListener="#{chooserSubjectHandler.dropListener}"
            dropValue="#{chooserSubjectContainer.selected}">
            <ice:dataTable
                value="#{chooserSubjectContainer.filteredSelected}"
                var="chooserSubject"
                scrollable="true"
                scrollHeight="200px">
                <f:facet name="header">
                    <ice:outputText value="Selected"/>
                </f:facet>
                <ice:column>
                    <f:facet name="header">
                        <ice:panelGrid columns="2">
                            <ice:graphicImage value="../image/search.png"/>
                            <ice:inputText
                                onkeyup="typeSubmit(this);"
                                partialSubmit="true"
                                value="#{chooserSubjectContainer.selectedFilter}"
                                valueChangeListener="#{chooserSubjectHandler.filterListener}">
                                    <f:attribute
                                        name="master"
                                        value="#{chooserSubjectContainer.selected}"/>
                                    <f:attribute
                                        name="filtered"
                                        value="#{chooserSubjectContainer.filteredSelected}"/>
                            </ice:inputText>
                        </ice:panelGrid>
                    </f:facet>
                    <ice:rowSelector
                        value="#{chooserSubject.selected}"
                        multiple="true"
                        selectionListener="#{chooserSubjectHandler.selectionListener}"/>
                    <ice:panelGroup
                        styleClass="subject-chooser-subject"
                        draggable="#{chooserSubject.selected}"
                        dragValue="#{chooserSubjectContainer.selected}"
                        dragOptions="dragGhost">
                        <ice:panelGrid
                            columns="2"
                            styleClass="subject-list">
                            <ice:panelGroup>
                                <ice:graphicImage
                                    value="../image/user.png"/>
                            </ice:panelGroup>
                            <ice:panelGroup>
                                <ice:outputText value="#{chooserSubject.name}"/>
                            </ice:panelGroup>
                        </ice:panelGrid>
                    </ice:panelGroup>
                </ice:column>
            </ice:dataTable>
        </ice:panelGroup>
    </ice:panelGrid>
</ui:composition>