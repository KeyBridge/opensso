<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>
<script language="javascript">

var clickedBtn = '0';
var url = "https://opensso.dev.java.net/issues/createattachment.cgi";
var mydata;
var myid;
var mydescription;
var mytype;
var myothertype;

function setBtn(val)
{
     clickedBtn = val;
     return true;
}
function aggSubmit() {
var crtn=new Array(34);
crtn['submitter'] ='Submitter';
crtn['id'] ='Issue#';
crtn['component'] ='Component';
crtn['project'] ='Project';
crtn['workspaces'] ='Workspaces Affected';
crtn['descr'] ='Short description of the problem and the solution';
crtn['apichange'] ='API Changed';
crtn['otherparts'] ='Affects other parts of the product';
crtn['otherpartstested'] ='Were the dependencies rebuilt and tested'
crtn['uichange'] ='UI Changed';
crtn['uireviewer'] ='UI Reviewer';
crtn['userdocs'] ='User Docs Changed';
crtn['online'] ='Online Help Changes Required';
crtn['migration_updating'] ='Migration/Upgrading Affected';
crtn['desc_migration_updating'] ='Migration Description';
crtn['installer_change']  ='Installer Affected';
crtn['desc_installer_change'] = 'Installer Description';
crtn['comprisk'] ='Component Risk Level';
crtn['stabrisk'] ='Product Stability Risk';
crtn['pkgtested'] ='Packaging tested';
crtn['unittested'] ='Unit test Developed';
crtn['unittestloc'] ='Unit Test Location(s)';
crtn['testing'] ='Description of testing';
crtn['code_standards'] ='Coding standards followed';
crtn['desc_code_standards'] ='If not why?';
crtn['comments_addressed'] ='All comments addressed';
crtn['desc_comments_addressed'] ='Why comments were not addressed';
crtn['localworkspace'] ='Local workspace path';
crtn['files'] ='Listing of files affected';
crtn['codereviewer'] ='Code reviewer';
crtn['diffs'] ='File Diffs';
crtn['submit'] ='Submit';
crtn['reset'] ='Reset';
crtn['id'] ='Issue#';
crtn['component'] ='Component';

    var frms = document.forms;
    var crtFrm = frms['CRT'];
    var data = '';

    if ( crtFrm == null) 
       alert ("NULL!!!");
    for (var j = 0; j < 2; j++ ) {
      for (var i = 0; i < crtFrm.elements.length; i++) {
	var elm = crtFrm.elements[i];
        var eval = '';
        if (elm.type == 'submit' || elm.type == 'reset')
           continue;
        if ( j == 0) {
            if (elm.type == 'textarea')
                 continue;
            if (elm.type == 'radio') {
	      if (elm.checked) {
	        eval =  elm.value;
	      } else {
                continue; 
              }
            } else if (elm.type == 'checkbox') {
              if (elm.checked)
                eval = 'yes';
              else
                eval = 'no';
            } else
                eval = elm.value;
            
            var prt = crtn[elm.name];
            if (prt == null)
               prt = elm.name;
            var str = padleft(prt, ' ', 50) + '=' + eval + '\n';
            data = data + str;
        } else {
            if (elm.type != 'textarea')
                continue;
            var prt = crtn[elm.name];
            if (prt == null)
               prt = elm.name;
            var val = elm.value;
            if (val == '')
                val = '*Not Specified*'
            data = data + '\n' + prt + '\n--------------------\n'+val + '\n';
        }

       }
   }
   var hiddenFrm = document.forms['IT'];
   var hiddenFrmU = document.forms['ITU'];
   var hiddenFrmN = document.forms['NEWPATCH'];

    if (clickedBtn == '1' && hiddenFrm != null) {
        hiddenFrm.elements['id'].value = crtFrm.elements['id'].value;
        hiddenFrm.elements['comment'].value = data;
        /* alert(data); */
        hiddenFrm.elements['IDButton'].value = 'Submit';
        hiddenFrm.submit();
    }
    if (clickedBtn == '2' && hiddenFrmU != null) {
       hiddenFrmU.elements['id'].value = crtFrm.elements['id'].value;
       //hiddenFrmU.elements['data'].value = data;
       //hiddenFrmU.elements['IDButton'].value = 'Submit';
       /* hiddenFrmU.submit(); */
	mydata = data;
	myid = crtFrm.elements['id'].value;
	mydescription = "CRT:"+myid;
	mytype = "text/plain"
	myothertype = '';
	//document.getElementById('ajaxbutton').disabled = true;
        ajax_upload();
    }
    if (clickedBtn == '3' && hiddenFrmN != null)
    {
       hiddenFrmN.elements['reporter'].value = crtFrm.elements['submitter'].value;
       hiddenFrmN.elements['comment'].value = data;
       hiddenFrmN.elements['short_desc'].value = 'CRT Related to Issue#'+crtFrm.elements['id'].value;
       hiddenFrmN.elements['IDButton'].value = 'Submit';
       hiddenFrmN.submit();
    }
    
}
function padleft(val, ch, num) {
   var ll = val.length;
   var ret = val;
   if (ll < num) {
      ll =  num - ll;
      for (var i =0; i < ll ; i++) {
         ret = ch + ret;
      }
   }
   return ret;
}



function upload() {
	mydata = document.getElementById('data').value;
	myid = document.getElementById('id').value;
	mydescription = document.getElementById('description').value;
	mytype = document.getElementById('type').value;
	myothertype = document.getElementById('othertype').value;
	//document.getElementById('ajaxbutton').disabled = true;

	// start AJAX file upload in 1 second
	window.setTimeout("ajax_upload()", 1000);
}

function ajax_upload() {
	// request more permissions
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
	} catch (e) {
		alert("Permission open connection was denied." + e);
	}
	http_request = false;
	http_request = new XMLHttpRequest();
	if (!http_request) {
		alert('Cannot create XMLHTTP instance');
		return false;
	}

	// prepare the MIME POST data
	var boundaryString = 'capitano';
	var boundary = '--' + boundaryString;
	var requestbody = boundary + '\r\n' 
	+ 'Content-Disposition: form-data; name="id"' + '\r\n' 
	+ '\r\n' 
	+ myid 
	+ '\r\n' + boundary + '\r\n' 
	+ 'Content-Disposition: form-data; name="data"; filename="' 
		+ mydescription + '"' + '\r\n' 
	+ 'Content-Type: application/octet-stream' + '\r\n' 
	+ '\r\n'
	+ mydata
	+ '\r\n' + boundary + '\r\n'
	+ 'Content-Disposition: form-data; name="description"' + '\r\n' 
	+ '\r\n' 
	+ mydescription 
	+ '\r\n' + boundary + '\r\n' 
	+ 'Content-Disposition: form-data; name="type"' + '\r\n' 
	+ '\r\n' 
	+ mytype
	+ '\r\n' + boundary + '\r\n' 
	+ 'Content-Disposition: form-data; name="othertype"' + '\r\n' 
	+ '\r\n' 
	+ myothertype
	+ '\r\n' + boundary + '--\r\n';
        

	document.getElementById('sizespan').innerHTML = 
		"requestbody.length=" + requestbody.length;
	
	// do the AJAX request
	http_request.onreadystatechange = requestdone;
	http_request.open('POST', url, true);
	http_request.setRequestHeader("Content-type", "multipart/form-data; boundary=" + boundaryString);
	http_request.setRequestHeader("Connection", "close");
	http_request.setRequestHeader("Content-length", requestbody.length);
	http_request.send(requestbody);

}

function requestdone() {
	if (http_request.readyState == 4) {
		if (http_request.status == 200) {
			result = http_request.responseText;
			document.getElementById('myspan').innerHTML = result;            
		} else {
			alert('There was a problem with the request.');
		}
		//document.getElementById('ajaxbutton').disabled = false;
	}
}

</script>




   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>OpenSSO CRT</title>
   
   <link rel="stylesheet" href="crt.css">

<script language="Javascript">
function popUpWindow(url) {
    var bars = 'directories=no,location=0,menubar=0,status=0,titlebar=yes,toolbar=no';
    var options = 'scrollbars=yes,width=400,height=600,resizable=yes';
    var feature = bars + ',' + options;
    var openwin = window.open(url, 'help', feature);
    openwin.focus();
}
</script></head><body bgcolor="#ffffff" text="#000000">
<table cellpadding="2" width="100%">
<tbody><tr>
<td align="center" valign="top" width="99%">
<h2>OpenSSO Change/Patch Request Template (Draft v0.1)</h2>
</td>

<!--
<td align="right" bgcolor="#eeeeee" nowrap="nowrap" width="1%">
    View<br>
    <a href="http://policy.red.iplanet.com/cgi-bin/crtviewer7_1.cgi">all CRTs</a><br>
    <a href="http://policy.red.iplanet.com/cgi-bin/crtviewer_installer7_1.cgi">installer related CRTs</a><br>
    <a href="http://policy.red.iplanet.com/cgi-bin/crtviewer_migration7_1.cgi">migration related CRTs</a><br>
</td>
-->
</tr>
</tbody></table>
<hr color="#cccccc" noshade="noshade" size="1">

<form name="CRT" onSubmit="aggSubmit();return false;" >

<div class="secHdrTxt">General</div>
<br>

<table>
<tbody>
<tr>
<td>&nbsp;</td>
<td>Summitter :</td>
<td><input size="17" name="submitter" type="text"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>Issue number:</td>
<td><input size="17" name="id" crtn="Issue#" type="text"></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>Component:</td>
<td><input size="17" name="component" crtn="Component" type="text"></td>
</tr>

<tr>
<td>&nbsp;</td>
<td>Project:</td>
<td><select size="2" multiple="multiple" name="project"><option selected="selected">8.0</option></select></td>
</tr>
<tr>
<td>&nbsp;</td>
  <td>Workspaces Affected:
  <br>(select all that apply)</td>
  <td><select size="2" multiple="multiple" name="workspaces"><option selected="selected">8.0</option></select></td>
</tr>
<tr>

</tr><tr>
<td valign="top"><font color="red">*</font></td>
<td colspan="2" valign="top">Short description of the problem and the solution:</td>
</tr>
<tr>
<td>&nbsp;</td>
<td colspan="2"><textarea name="descr" cols="80" rows="5"></textarea></td>
</tr>
</tbody></table>

<p>
</p><hr color="#cccccc" noshade="noshade" size="1">
<div class="secHdrTxt">Engineering</div>
<br>

<table>
    <tbody><tr>
        <td><input name="otherparts" type="checkbox"></td>
        <td>Affects other parts of the product</td>
    </tr>
    <tr>
	<td>&nbsp;</td>
	<td>
            <table>
                <tbody><tr>
                    <td>** Were the dependencies rebuilt and tested?
                        <input name="otherpartstested" type="checkbox">
		    </td>
                </tr>
            </tbody></table>
        </td>
    </tr>
    <tr>
        <td><input name="apichange" crtn="API Changed" type="checkbox"></td>
        <td>API Changes</td>
    </tr>

    <tr>
        <td><input name="uichange" crtn="UI Chenged" type="checkbox"></td>
        <td>User Interface Modified</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>** UI reviewer:
            <select name="uireviewer">
                <option selected="selected">-- N/A --
                </option><option>Dennis Seah
                </option><option>Jon Nelson
            </option></select>
        </td>
    </tr>
</tbody></table>

<p>
</p><hr color="#cccccc" noshade="noshade" size="1">
<div class="secHdrTxt">Documentation</div>
<br>

<table>
<tbody>
<tr>
<td valign="top"><font color="red">*</font></td>
<td>User documentation :<br>Please provide <a href="javascript:popUpWindow('http://wiki.java.net/bin/view/Projects/OpenSSO')">Wiki</a> pointer :</td>
<td><input name="userdocs" type="text" size="50"></td>
</tr>
<tr>
<td valign="top"><font color="red">*</font></td>
<td>Diagnostics/Troubleshooting documentation :<br>Please provide <a href="javascript:popUpWindow('http://wiki.java.net/bin/view/Projects/OpenSSO')">Wiki</a> pointer :</td>
<td><input name="userdocs" type="text" size="50"></td>
</tr>

<tr>
<td><input name="online" crtn="Online Help Changes Required" type="checkbox"></td>
<td>Online help changes required.</td>
</tr>
</tbody></table>

<blockquote>
<font size="-1"><i>NOTE: UI, programmatic interfaces, command line parameter,
configuration file and new components typically require at least one of the above. Diagnostic and troubleshooting documentation should include detection of misconfigurations and tips on correcting them.</i></font>
</blockquote>
<p>
</p><hr color="#cccccc" noshade="noshade" size="1">
<div class="secHdrTxt">Migration/Upgrading</div>
<br>
<table>
    <tbody><tr>
        <td align="top"><font color="red">*</font></td>
	<td>
  	    Does this affect migration/upgrading from previous release? 
<font color="#6666cc"><a href="javascript:popUpWindow('migration_help.html')"> <i>(more information...)</i> </a></font>
	    <input name="migration_updating" crtn="Migration/Upgrading Affected" value="yes" type="radio" checked="yes">Yes 
	    <input name="migration_updating" crtn="Migration/Upgrading Affected" value="no" type="radio">No
	</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
	<td>If yes, please describe.
<br><textarea name="desc_migration_updating" crtn="Migration Description" cols="80" rows="5"></textarea>
	</td>
    </tr>
</tbody></table>

<p>
</p><hr color="#cccccc" noshade="noshade" size="1">
<div class="secHdrTxt">Installer</div>
<br>
<table>
    <tbody><tr>
	<td align="top"><font color="red">*</font></td>
	<td> 
	    Does this affect the installer?<font color="#6666cc"><a href="javascript:popUpWindow('installer_help.html')"> <i>(more information...)</i> </a></font>
	    <input name="installer_change"  crtn="Installer Affected" value="yes" type="radio" checked="yes">Yes
	    <input name="installer_change" crtn="Installer Affected" value="no" type="radio">No
	</td>
    </tr>
    <tr>
	<td>&nbsp;</td>
	<td>
 	    If yes, please describe.
	    <br><textarea name="desc_installer_change" crtn"Installer Description" cols="80" rows="5"></textarea>
	</td>
    </tr>
</tbody></table>

<p>
</p><hr color="#cccccc" noshade="noshade" size="1">
<div class="secHdrTxt">Test/Quality</div>
<br>
<table>
    <tbody><tr>
        <td><font color="red">*</font></td>
        <td>Risk to the component being changed:</td>
	<td>
            <input name="comprisk" crtn="Component Risk Level" value="low" type="radio">Low
            <input name="comprisk" crtn="Component Risk Level" value="medium" type="radio">Med
            <input name="comprisk" crtn="Component Risk Level" value="high" type="radio" checked="yes">High
        </td>
    </tr>
    <tr>
        <td><font color="red">*</font></td>
	<td>Risk to product stability:</td>
	<td>
            <input name="stabrisk" crtn="Product Stability Risk" value="low" type="radio">Low
            <input name="stabrisk" crtn="Product Stability Risk" value="medium" type="radio">Med
            <input name="stabrisk" crtn="Product Stability Risk" value="high" type="radio" checked="yes">High
	</td>
    </tr>
</tbody></table>
<table>
    <tbody><tr>
        <td>&nbsp;</td>
        <td>
  	    <input name="pkgtested" crtn="Packaging tested" type="checkbox">
        </td>
        <td>
	    Component packaging tested.
	</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>
            <input name="unittested" crtn="Unit test Developed" type="checkbox">
        </td>
        <td>
            Unit test developed.
        </td>
    </tr>
    <tr>
        <td colspan="2">&nbsp;</td>
        <td valign="top">Location of the unit test files.</td>
    </tr>
    <tr>
        <td colspan="2">&nbsp;</td>
        <td><textarea name="unittestloc" crtn="Unit Test Location(s)" cols="80" rows="5"></textarea></td>
    </tr>

    <tr><td colspan="3">&nbsp;</td></tr>
    <tr>
        <td><font color="red">*</font></td>
        <td colspan="2" valign="top">Description of testing performed.</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td colspan="2"><textarea name="testing" crtn="Description of testing" cols="80" rows="5"></textarea></td>
    </tr>
</tbody></table>

<p>
</p><hr color="#cccccc" noshade="noshade" size="1">
<div class="secHdrTxt">Review/Diffs</div>
<br>

<table>
    <tbody><tr>
	<td align="top"><font color="red">*</font></td>
	<td> 
	    Code following coding standards?
	    <input name="code_standards" crtn="Coding standards followed" value="yes" type="radio">Yes
	    <input name="code_standards"  crtn="Coding standards followed" value="no" type="radio" checked="yes">No
	</td>
    </tr>
</tbody></table>

<table>
    <tbody><tr>
	<td align="top"><font color="red">*</font></td>
	<td> 
	    All reviewer comments completed/addressed?
	    <input name="comments_addressed" crtn="All comments addressed" value="yes" type="radio">Yes
	    <input name="comments_addressed" crtn="All comments addressed" value="no" type="radio" checked="yes">No
	</td>
    </tr>
    <tr>
	<td>&nbsp;</td>
	<td>
 	    If not, why.
	    <br><textarea name="desc_comments_addressed" crtn="If not why?" cols="80" rows="5"></textarea>
	</td>
    </tr>
</tbody></table>

<table>
    <tbody><tr>
        <td><font color="red">*</font></td>
        <td>Path to local workspace: <input size="30" name="localworkspace" crtn="Local workspace path" type="text"></td>
    </tr>
    <tr>
        <td><font color="red">*</font></td>
        <td>
            Listing of the files created/deleted/updated. <i>(use 'cvs stat')</i>
        </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><textarea name="files" cols="80" rows="10"></textarea></td>
    </tr>
</tbody></table>


<p>
<table>
    <tbody><tr>
        <td><font color="red">*</font></td>
        <td>Change Reviewer(s):&nbsp;<input size="30" name="codereviewer" crtn="Code reviewer" type="text"></td>
    
    </tr>
    <tr>
        <td><font color="red">*</font></td>
        <td>Context specific diffs (or pointer to the diffs) of the added/modified/removed files</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><textarea name="diffs" crtn="File Diffs" cols="80" rows="10"></textarea></td>
    </tr>
</tbody></table>

</p><hr color="#cccccc" noshade="noshade" size="1">


<table>
    <tbody><tr>
        <td><input name="submitN" value="Submit (Update)" type="submit" onclick="return setBtn('1');"></td>
        <td><input name="submitC" value="Submit (Attach)" type="submit" onclick="return setBtn('2');"></td>
        <td><input name="submitN" value="Submit (New)" type="submit" onclick="return setBtn('3');"></td>
        <td><input name="reset" value="Reset" type="reset"></td>
    </tr>
</tbody></table>

</form>

<br><b>Notes: </b>
<br><b>Submit (Update)</b> will update an existing issue (specified by Issue# parameter) with a CRT instance in the description field.
<br><b>Submit (Attach)</b> will update an existing issue (Issue#) with a CRT instance as an attachment to the issue.
<br><b>Submit (New)</b> will create a new issue with Issue# in short summary and CRT instance in the description field.


<br><br>******** Please ignore stuff below : its for debugging **********<br><br>

<FORM name="IT" action="https://opensso.dev.java.net/issues/process_bug.cgi" method="post">
    <P>
    ID : <INPUT type="text" name="id" crtn="Issue#"><BR>
    Component : <INPUT type="text" name="component" crtn="Component" value="opensso"><BR>
    Sub Component: <INPUT type="text" name="subcomponent" value="Web site"><BR>
    Version : <INPUT type="text" name="version" value="current"><BR>
    Rep Platform : <INPUT type="text" name="rep_platform" value="All"><BR>
    Operating System: <INPUT type="text" name="op_sys" value="All"><BR>
    Priority: <INPUT type="text" name="priority" value="P3"><BR>
    Issue Type: <INPUT type="text" name="issue_type" value=PATCH><BR>
    Knob : <INPUT type="text" name="knob" value="reassignbysubcomponent"><BR>
    Assigned To : <INPUT type="text" name="assigned_to"><BR>
    CC : <INPUT type="text" name="newcc" ><BR>
    Issue File Loc : <INPUT type="text" name="issue_file_loc" value="http://"><BR>
    Short Desc : <INPUT type="text" name="short_desc" value="TEST, IGNORE"><BR>
    Comment : <textarea name="comment" rows="10" cols="80" value="TEST, IGNORE"></textarea><BR>
    logdesclength : <INPUT type="text" name="longdesclength" value="8000"><BR>
    <input label="Submit" name="IDButton" value="submit" type="submit">
    </P>
 </FORM>
<FORM name="ITU" action="https://opensso.dev.java.net/issues/createattachment.cgi" method="post" enctype="multipart/form-data">
id:<input name="id" type="text"><br>
<!-- Data:<textarea name="data"></textarea> <br>  -->
Data:<input name="data" type="file" value="C:\Sun\arch\CRTstuff\1.txt"><br>
Desc : <input name="description" type="text"><br>
Type: <input name="type" type="text" value="text/plain"><br>
OtherType : <input name="othertype" type="text"><br>
<input name="IDButton" value="submit" type="submit">
</FORM>

<FORM>
id:<input name="id" id="id" type="text"><br>
Data:<textarea name="data" id="data"></textarea> <br>
<!-- Data:<input name="data" type="file" value="C:\Sun\arch\CRTstuff\1.txt"><br> -->
Desc : <input name="description" id="description" type="text"><br>
Type: <input name="type" id="type" type="text" value="text/plain"><br>
OtherType : <input name="othertype" id="othertype"  type="text"><br>
<input type="button" name="IDButton" id="ajaxbutton" value="submit" onclick="upload();">
</FORM>

<div id="sizespan"></div>
<hr>
<div id="myspan"></div>


<FORM name="NEWPATCH" action="https://opensso.dev.java.net/issues/post_bug.cgi" method="post">
    <P>
    Reporter : <INPUT type="text" name="reporter" value="rajeevangal"><BR>
    Component : <INPUT type="text" name="component" value="opensso"><BR>
    Sub Component: <INPUT type="text" name="subcomponent" value="Web site"><BR>
    Version : <INPUT type="text" name="version" value="current"><BR>
    Rep Platform : <INPUT type="text" name="rep_platform" value="All"><BR>
    Operating System: <INPUT type="text" name="op_sys" value="All"><BR>
    Priority: <INPUT type="text" name="priority" value="P3"><BR>
    Issue Type: <INPUT type="text" name="issue_type" value=PATCH><BR>
    Assigned To : <INPUT type="text" name="assigned_to"><BR>
    CC : <INPUT type="text" name="cc"><BR>
    Issue File Loc : <INPUT type="text" name="issue_file_loc" value="http://"><BR>
    Short Desc : <INPUT type="text" name="short_desc" value="TEST, IGNORE"><BR>
    Comment : <textarea name="comment"></textarea><BR>
    <input type="button" label="Submit" name="IDButton" value="submit" type="submit">
    </P>
 </FORM>



</body>
</html>
