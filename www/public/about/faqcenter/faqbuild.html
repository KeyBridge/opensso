 <div><table cellpadding="0" cellspacing="10" border="0" align="center" valign="top">
  <col WIDTH=100%>
	<tr><td><img src="../../../images/logo.gif" width="179" height="68" border="0" alt="OpenSSO"></td></tr>
	<tr><td><h2>FAQ Build Requirements and Dependencies</h2></td></tr>
	<tr><td>The information below was taken from the README located in the <code>products/amserver</code> directory of the <code>opensso</code> branch of the CVS tree. Please see the README for additional information. You can find it <a href="https://opensso.dev.java.net/source/browse/opensso">here</a>.</td></tr>
	<tr><td><font size="2">
<ol>
<li><a href="#tool">What tool is used to build an OpenSSO binary?</a></li>
<li><a href="#jdk">What version of the Java Development Kit (JDK) is needed?</a></li>
<li><a href="#libdep">What are the library dependencies?</a></li>
<li><a href="#j2ee">How do I get <code>j2ee.jar</code>?</a></li>
<li><a href="#mail">How do I get <code>mail.jar</code>?</a></li>
<li><a href="#jwsdp">How do I get <code>jaxb-api.jar</code> and <code>jaxrpc-api.jar</code>?</a></li>
<li><a href="#ldapjdk">How do I get <code>ldapjdk.jar</code>?</a></li>
<li><a href="#db">How do I get <code>db.jar</code>?</a></li>
<li><a href="#workspace">How do I build the workspace?</a></li>
<li><a href="#build">What processing does the <code>build</code> target involve?</a></li>
<li><a href="#doc">What processing does the <code>doc</code> target involve?</a></li>
<li><a href="#clean">What processing does the <code>clean</code> target involve?</a></li>
<li><a href="#demo">What processing does the <code>demo</code> target involve?</a></li>
<li><a href="#democlean">What processing does the <code>demo-clean</code> target involve?</a></li>
<li><a href="#usage">What processing does the <code>usage</code> target involve?</a></li>
<li><a href="#builddemo">How do you build the demo?</a></li>
</ol>
</font></td></tr>


<tr><td><p><b>Q:<b><a name="tool"></a> What tool is used to build an OpenSSO binary?</b></b></p>

<p> The OpenSSO workspace uses Apache Ant as the build tool. The build scripts in the workspace use features not present in releases of Ant prior to 1.6. Thus, in order to build the workspace you must have Ant version 1.6 or above installed and available in your system path.</p></td></tr>


<tr><td><p><b>Q:<b><a name="jdk"></a> What version of the Java Development Kit (JDK) is needed?</b></b></p>

<p>
The sources in this workspace should be compiled using JDK 5.0 with the source and target levels set to <b>1.4</b>. In order to allow this, you must ensure that JDK 5.0 is available in your system path and the JAVA_HOME environment variable is setup correctly, pointing to its location.
</p></td></tr>


<tr><td><p><b>Q:<b><a name="libdep"></a> What are the library dependencies?</b></b></p>

The OpenSSO sources depend upon several libraries that are not included as a part of the workspace and must be obtained directly from the vendor or distributor. Some of these libraries are available in source distribution form and must be built locally before they can be used. The libraries needed for compiling OpenSSO sources are:

<ul>
<li>J2EE SDK version 1.3.1: <code>j2ee.jar</code></li>
<li>Java Mail version 1.2: <code>mail.jar</code></li>
<li>JWSDP version 1.6: <code>jaxb-api.jar</code>, <code>jaxrpc-api.jar</code></li>
<li>Mozilla LDAP JDK version 4.17: <code>ldapjdk.jar</code></li>
<li>SleepyCat Berkeley DB version 4.2.52: <code>db.jar</code></li>
</ul>

<p>Once these libraries are available, they should be placed under the <code>extlib</code> directory of the workspace. Any library placed in this directory is automatically included in the classpath during the compilation phase of the build process.</p>

<p><i>The following sections briefly describe how these libraries may be obtained. These instructions are provided for your convenience only and are not intended to replace or invalidate the procedures/guidelines set by the library vendor or distributor. Before following these instructions, you must agree to abide by any terms and conditions set forth by the library vendor or distributor. In case any of these instructions are in contradiction to such terms or conditions, you must disregard those instructions and instead follow the ones provided by the library vendor or distributor in accordance with their terms and conditions.</i>
</p></td></tr>

<tr><td><p><b>Q:<b><a name="j2ee"></a> How do I get <code>j2ee.jar</code>?</b></b></p>

<p>The <code>j2ee.jar</code> library can be obtained from J2EE SDK version 1.3.1. Use the following procedure to get the SDK and extract the JAR.

<ol>
<li>Go to <a href="http://java.sun.com/j2ee/sdk_1.3">http://java.sun.com/j2ee/sdk_1.3</a>.</li>
<li>Scroll down to the section titled <b>Download the Software for the Java 2 SDK, Enterprise Edition 1.3.1</b> and click Download.</li>
<li>Review the license agreement on the resulting page and choose <i>Accept</i> or <i>Decline</i>.</li>
<li>If you chose <i>Accept</i>, you can download any one of the available distributions, dependent on your platform.</li>
<li>Extract and install the downloaded file as necessary to make the SDK available on your system.</li>
<li>Once the J2EE SDK is installed, get the <code>j2ee.jar</code> file from the <code>lib</code> directory.</li>
</ol>

</p></td></tr>

<tr><td><p><b>Q:<b><a name="mail"></a> How do I get <code>mail.jar</code>?</b></b></p>

<p>The <code>mail.jar</code> library can be obtained from the JavaMail API version 1.2. Use the following procedure to get the JavaMail API:

<ol>
<li>Go to <a href="http://java.sun.com/products/javamail/javamail-1_2.html">http://java.sun.com/products/javamail/javamail-1_2.html</a>.</li>
<li>Click Download.</li>
<li>Review the license agreement on the resulting page and choose <i>Accept</i> or <i>Decline</i>.</li>
<li>If you chose <i>Accept</i>, download the <code>javamail-1_2.zip</code> file.</li>
<li>Extract the contents of the file into a convenient location.</li>
<li>Get the <code>mail.jar</code> from the <code>javamail-1_2</code> directory of the expanded image of the downloaded file.</li>
</ol>

</p></td></tr>

<tr><td><p><b>Q:<b><a name="jwsdp"></a> How do I get <code>jaxb-api.jar</code> and <code>jaxrpc-api.jar</code>?</b></b></p>

<p>The <code>jaxb-api.jar</code> and <code>jaxrpc-api.jar</code> libraries can be obtained from the JWSDP version 1.6. Use the following procedure to get the JWSDP 1.6:

<ol>
<li>Go to <a href="http://java.sun.com/webservices/downloads/webservicespack.html">http://java.sun.com/webservices/downloads/webservicespack.html</a>.</li>
<li>Click Download.</li>
<li>You will have to log in to (or register with) the Sun Developer Network on the resulting page.</li>
<li>Once you have logged in, review the license agreement and choose <i>Accept</i> or <i>Decline</i>.</li>
<li>If you chose <i>Accept</i>, you can download any one of the available distributions, dependent on your platform.</li>
<li>Install the downloaded file.</li>
<li>After installation, <code>jaxb-api.jar</code> is located in <code><i>jwsdp_install_directory</i>/jaxb/lib</code> and <code>jaxrpc-api.jar</code> is in <code><i>jwsdp_install_directory</i>/jaxrpc/lib</code>.</li>
</ol>

</p></td></tr>

<tr><td><p><b>Q:<b><a name="ldapjdk"></a> How do I get <code>ldapjdk.jar</code>?</b></b></p>

<p>The <code>ldapjdk.jar</code> library can be built using the source distribution provided by the Mozilla project. Use the following procedure to get the <code>ldapjdk.jar</code>:

<ol>
<li>Go to <a href="http://www.mozilla.org/directory/ldapsdk.html">http://www.mozilla.org/directory/ldapsdk.html</a>.</li>
<li>Download the source distribution in either the <i>zip</i> or <i>tar-gzip</i> format.</li>
<li>Extract the contents of the file into a convenient location.</li>
<li>Follow the build instructions based on your platform.<p>
The complete build instructions are available at <a href="http://www.mozilla.org/directory/buildjsdk-4.0.txt">http://www.mozilla.org/directory/buildjsdk-4.0.txt</a>. A copy of these instructions is also located in the <code>mozilla/directory</code> directory in a file called <code>buildjsdk.txt</code>. Note that if you are using JDK 5.0 for compilation, you will have to modify the make-files to add a <code>-source 1.3</code> to the compiler definition. This is to ensure that the build does not break due to the use of newly introduced keywords (such as <code>enum</code> and <code>assert</code>) in the JDK 1.4 and JDK 5.0 releases. The remaining instructions in this section are specific to the Unix platform.</p></li>
<li>Change to the <code>mozilla/directory/java-sdk</code> directory.</li>
<li>If using JDK 5.0 for compilation, open the <code>ldap.mk</code> file and modify the JAVAC variable definition to include the <code>-source 1.3</code> option as follows:<p>
<code>JAVAC=$(JDKBIN)javac -O -classpath "$(JAVACLASSPATH)" -source 1.3</code></p>
<p>This variable must be changed in three places.</p></li>
<li>Compile the sources using <code>gmake -f ldap.mk JAVA_VERSION=<i>1.5</i></code> where the value of JAVA_VERSION is replaced with one appropriate to your environment.</li>
<li>Package the compiled sources into a JAR with the command <code>gmake -f ldap.mk JAVA_VERSION=<i>1.5</i> basepackage</code>. Again, replace JAVA_VERSION with the value appropriate to your environment.</li>
<li>After compilation, the <code>ldapjdk.jar</code> can be found in the <code>mozilla/directory/java-sdk/dist/packages</code> directory.</li>
</ol>

</p></td></tr>

<tr><td><p><b>Q:<b><a name="db"></a> How do I get <code>db.jar</code>?</b></b></p>

<p>The <code>db.jar</code> can be built using the source distribution provided by Sleepycat Software. Use the following procedure to get the <code>db.jar</code>:

<ol>
<li>Go to <a href="http://www.sleepycat.com/download/index.shtml">http://www.sleepycat.com/download/index.shtml</a>.</li>
<li>Click the Release History link under Berkeley DB.</li>
<li>Scroll down to 4.2.52 and download the source distribution in either the <i>zip</i> or <i>tar-gzip</i> format.
<li>Extract the contents of the file into a convenient location.</li>
<li>Follow the build instructions based on your platform.<p>
The complete build instructions can be accessed from the <code>index.html</code> page in the <code>docs</code> directory. Open the file in a browser and click the <i>Building Berkeley DB</i> link appropriate to your platform. The remaining instructions in this section are specific to the Unix platform.</li>
<li>Change to the <code>db-4.2.52.NC/build_unix</code> directory and run the following command:<p>
<code>../dist/configure --enable-java</code></p>
<p>You will need a C compiler and development utilities (such as <code>gmake</code>, <code>autoconf</code>, and <code>libtool</code>) available on your system.</p></li>
<li>Run the following command after successfully running the command in the previous step:<p>
<code>gmake</code></p></li>
<li>The <code>db.jar</code> is in the <code>db-4.2.52.NC/build_unix</code> directory.
<p>The distribution does not have to be installed to get the library.</p></li>
</ol>

</p></td></tr>

<tr><td><p><b>Q:<b><a name="workspace"></a> How do I build the workspace?</b></b></p>


<p>The build system offers many targets including:

<ul>
<li><code>build</code> : compiles the sources</li>
<li><code>doc</code> : creates the Javadoc</li>
<li><code>clean</code> : deletes the generated files</li>
<li><code>demo</code> : builds the demo application</li>
<li><code>demo-clean</code> : deletes the generated demo files</li>
<li><code>usage</code> : displays a brief description of the other targets</li>
</ul>

<p>You can also view the build targets by issuing the <code>ant</code> command from the root of the workspace. The default target executed is <code>usage</code>.</p>

<p><i>The following sections describe the targets.</i>
</p></td></tr>

<tr><td><p><b>Q:<b><a name="build"></a> What processing does the <code>build</code> target involve?</b></b></p>

<p>The <code>build</code> target compiles the source code. It accomplishes the following:</p>

<ul>
<li>Creates the build output directories including:<p>
<ul>
<li><code><i>workspace_root</i>/built</code></li>
<li><code><i>workspace_root</i>/built/classes</code></li>
<li><code><i>workspace_root</i>/built/resources</code></li>
<li><code><i>workspace_root</i>/built/docs</code></li>
<li><code><i>workspace_root</i>/built/docs/api</code></li>
</ul></li>

<li>Compiles all the classes in the source directory into the <code><i>workspace_root</i>/built/classes</code> directory.<p>

The compilation debug flag is set to <code>-g:none</code> but can be changed by defining the following properties in your user level property file, <code>$HOME/.opensso</code>:</p>

<ul>
<li><code>build.debug</code>: Accepted values are <code>on</code> and <code>off</code>. Example: <code>build.debug=on</code></li>
<li><code>build.debuglevel</code>: Accepted values are one or more of <code>lines</code>, <code>vars</code>, <code>source</code> as a comma-separated list. Example: <code>build.debuglevel=lines,source</code></li>
</ul></li>

<li>Transfers the resource, XML files from the resources and XML directories into the <code><i>workspace_root</i>/built/resources</code> directory.<p>

The exceptions are:</p>

<ul>
<li>As per its defined location, <code>sms.dtd</code> is copied over to the <code>classes</code> directory under the <code>com/sun/identity/sm</code> package for reference by other XML files.</li>
<li><code>Services.properties</code>, <code>DSConfig.properties</code>, <code>ums.properties</code>, <code>sso.properties</code>, <code>SMS.properties</code> and <code>authentication_util.properties</code> are combined into a single properties file called <code>amSDK.properties</code>.</li></ul><p>

All XML files are tag-swapped to change the value of the XML_ENCODING tag to ISO-8859-1.</p></li></ul>

</p></td></tr>

<tr><td><p><b>Q:<b><a name="doc"></a> What processing does the <code>doc</code> target involve?</b></b></p>

<p>The <code>doc</code> target creates the Javadoc. It accomplishes the following:</p>

<ul>
<li>Creates the build output directories including:<p>
<ul>
<li><code><i>workspace_root</i>/built</code></li>
<li><code><i>workspace_root</i>/built/classes</code></li>
<li><code><i>workspace_root</i>/built/resources</code></li>
<li><code><i>workspace_root</i>/built/docs</code></li>
<li><code><i>workspace_root</i>/built/docs/api</code></li>
</ul></li>

<li>Executes the Javadoc tool with an output directory set to <code><i>workspace_root</i>/built/docs/api</code> and includes the following packages:<p>

The compilation debug flag is set to <code>-g:none</code> but can be changed by defining the following properties in your user level property file, <code>$HOME/.opensso</code>:</p>

<ul>
<li><code>com/iplanet/sso/**</code></li>
<li><code>com/iplanet/dpro/**</code></li>
<li><code>com/sun/identity/session/**</code></li>
</ul>

<p><code>**</code> refers to all subpackages.</p></li></ul>

</p></td></tr>

<tr><td><p><b>Q:<b><a name="clean"></a> What processing does the <code>clean</code> target involve?</b></b></p>

<p>The <code>clean</code> target deletes all generated files and removes all the build output directories.</p></td></tr>

<tr><td><p><b>Q:<b><a name="demo"></a> What processing does the <code>demo</code> target involve?</b></b></p>

<p>The <code>demo</code> target first invokes the <code>build</code> target. It then delegates further processing to the <code>build.xml</code> file located in the <code>products/amserver/demo</code> directory.</p>

<p><i>The <code>demo</code> target cannot be executed directly unless the configuration tasks described in the README file in the <code>products/amserver/demo</code> directory are performed. Refer to the README for further details.</i></p></td></tr>

<tr><td><p><b>Q:<b><a name="democlean"></a> What processing does the <code>demo-clean</code> target involve?</b></b></p>

<p>The <code>demo-clean</code> target issues a clean to the <code>build.xml</code> file in the <code>products/amserver/demo</code> directory. This target is useful if you are interested in rebuilding the demo without rebuilding the entire OpenSSO distribution. When running <code>demo-clean</code>, only the demo-related build output area is cleaned and not the build output area for the OpenSSO distribution.</p></td></tr>

<tr><td><p><b>Q:<b><a name="usage"></a> What processing does the <code>usage</code> target involve?</b></b></p>

<p>The <code>usage</code> target displays a list of available targets with a brief description.</p></td></tr>

<tr><td><p><b>Q:<b><a name="builddemo"></a> How do you build the demo?</b></b></p>

<p>Instructions to build the demo can be found in the README file in the <code>products/amserver/demo</code> directory. This file also provides background information and details on how it works.</p></td></tr>

</table>

</p>

<!-- content boundary -->
</div>
